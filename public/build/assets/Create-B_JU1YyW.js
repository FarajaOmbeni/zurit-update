import{C as k,e as C,o as i,w as V,a as e,c as d,f as m,u as r,t as u,g as M,j as p,F as c,i as b,l as S,v as f,b as D,h as x}from"./app-D1dpHt8-.js";import{_ as $}from"./AdminSidebar-fy4AxYDz.js";import{V as F}from"./VideoUploader-B-vX4SQo.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./EllipsisHorizontalIcon-Dm_7TcDk.js";import"./ChartBarIcon-BAN-OuvL.js";import"./UserIcon-CvSeEtk8.js";import"./CalendarIcon-BM-aOKWg.js";import"./CalendarDaysIcon-CGEmR75l.js";import"./DocumentTextIcon-4fRX9bky.js";import"./UserGroupIcon-nLqz7qqi.js";import"./UsersIcon-BelpWFEJ.js";const B={class:"max-w-3xl mx-auto py-10 sm:px-6 lg:px-8"},A={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},P={class:"p-6 bg-white border-b border-gray-200"},z={key:0,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},q={class:"flex items-center"},N={class:"text-red-700 text-sm mt-1"},T={class:"mb-6"},j=["value"],E={key:0,class:"mt-2 text-sm text-red-600"},O={class:"mb-6"},H={key:0,class:"mt-2 text-sm text-red-600"},I={class:"mb-6"},L={key:0,class:"mt-2 text-sm text-red-600"},R={class:"mb-6"},G={class:"mb-4"},J=["for"],K=["onUpdate:modelValue","id"],Q={class:"mb-4"},W=["for"],X=["onChange","id"],Y={key:0,class:"mt-1 text-sm text-green-600"},Z={class:"mb-4"},ee={key:0,class:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-md"},te=["onClick"],oe={class:"flex items-center justify-end pt-6 border-t border-gray-200"},se=["disabled"],re={key:0},le={key:1},ie={__name:"Create",props:{mainCourses:{type:Array,default:()=>[]}},setup(g){const o=k({title:"",description:"",parent_id:"",materials:[{title:"",file:null,video_file:null}]}),v=()=>{o.materials.push({title:"",file:null,video_file:null})},y=l=>{o.materials.splice(l,1)},_=(l,t)=>{const s=l.target.files[0];s&&s.type==="application/pdf"?o.materials[t].file=s:(alert("Please upload a valid PDF file."),l.target.value="")},h=(l,t)=>{o.materials[t].video_file=l},w=()=>{const l=new FormData;l.append("title",o.title),l.append("description",o.description),l.append("parent_id",o.parent_id),o.materials.forEach((t,s)=>{l.append(`materials[${s}][title]`,t.title),t.file&&l.append(`materials[${s}][file]`,t.file)}),o.post(route("admin.courses.store"),{data:l,forceFormData:!0,onSuccess:()=>{o.reset()}})};return(l,t)=>(i(),C($,{title:"Add Sub-Course"},{default:V(()=>[e("div",B,[e("div",A,[e("div",P,[t[16]||(t[16]=e("h2",{class:"text-lg font-medium text-gray-900 mb-6"}," Add Sub-Course ",-1)),r(o).errors.error?(i(),d("div",z,[e("div",q,[t[5]||(t[5]=e("div",{class:"text-red-600 mr-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),e("div",null,[t[4]||(t[4]=e("p",{class:"text-red-800 font-medium"}," Upload Error ",-1)),e("p",N,u(r(o).errors.error),1)])])])):m("",!0),e("form",{onSubmit:M(w,["prevent"])},[e("div",T,[t[7]||(t[7]=e("label",{for:"parent_id",class:"block text-sm font-medium text-gray-700"},"Select Main Course *",-1)),p(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>r(o).parent_id=s),id:"parent_id",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm",required:""},[t[6]||(t[6]=e("option",{value:""},"Choose a main course",-1)),(i(!0),d(c,null,b(g.mainCourses,s=>(i(),d("option",{key:s.id,value:s.id},u(s.title),9,j))),128))],512),[[S,r(o).parent_id]]),t[8]||(t[8]=e("p",{class:"mt-1 text-xs text-gray-500"}," Select the main course to which you want to add this sub-course. ",-1)),r(o).errors.parent_id?(i(),d("p",E,u(r(o).errors.parent_id),1)):m("",!0)]),e("div",O,[t[9]||(t[9]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Sub-Course Title",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>r(o).title=s),type:"text",id:"title",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm",required:""},null,512),[[f,r(o).title]]),r(o).errors.title?(i(),d("p",H,u(r(o).errors.title),1)):m("",!0)]),e("div",I,[t[10]||(t[10]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),p(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>r(o).description=s),id:"description",rows:"4",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm",required:""},null,512),[[f,r(o).description]]),r(o).errors.description?(i(),d("p",L,u(r(o).errors.description),1)):m("",!0)]),e("div",R,[t[14]||(t[14]=e("h3",{class:"text-md font-medium text-gray-700 mb-4"}," Study Materials ",-1)),(i(!0),d(c,null,b(r(o).materials,(s,n)=>(i(),d("div",{key:n,class:"material-item mb-6 p-4 border rounded-lg"},[e("div",G,[e("label",{for:`material-title-${n}`,class:"block text-sm font-medium text-gray-700 mb-1"},"Material Title",8,J),p(e("input",{"onUpdate:modelValue":a=>s.title=a,type:"text",id:`material-title-${n}`,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm",required:""},null,8,K),[[f,s.title]])]),e("div",Q,[e("label",{for:`material-file-${n}`,class:"block text-sm font-medium text-gray-700 mb-1"},"PDF Document (Optional)",8,W),e("input",{type:"file",onChange:a=>_(a,n),id:`material-file-${n}`,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100",accept:".pdf"},null,40,X),t[11]||(t[11]=e("p",{class:"mt-1 text-xs text-gray-500"}," Maximum file size: 10MB. Only PDF files are accepted. ",-1)),s.file?(i(),d("p",Y," ✓ PDF uploaded: "+u(s.file.name),1)):m("",!0)]),e("div",Z,[D(F,{label:`Video for ${s.title||"Material "+(n+1)} (Optional)`,modelValue:s.video_file,"onUpdate:modelValue":a=>s.video_file=a,onVideoSelected:a=>h(a,n)},null,8,["label","modelValue","onUpdate:modelValue","onVideoSelected"])]),!s.file&&!s.video_file?(i(),d("div",ee,t[12]||(t[12]=[e("p",{class:"text-amber-800 text-sm"}," ⚠️ Please upload at least one file (PDF or Video) for this material. ",-1)]))):m("",!0),r(o).materials.length>1?(i(),d("button",{key:1,type:"button",onClick:a=>y(n),class:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Remove Material ",8,te)):m("",!0)]))),128)),e("button",{type:"button",onClick:v,class:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-purple-700 bg-purple-100 hover:bg-purple-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500"},t[13]||(t[13]=[e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),x(" Add Another Material ")]))]),e("div",oe,[e("button",{type:"button",onClick:t[3]||(t[3]=s=>l.$inertia.visit(l.route("admin.courses.index"))),class:"mr-4 inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500"}," Cancel "),e("button",{type:"submit",class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",disabled:r(o).processing},[r(o).processing?(i(),d("span",re,t[15]||(t[15]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" Saving... ")]))):(i(),d("span",le,"Add Sub-Course"))],8,se)])],32)])])])]),_:1}))}},ye=U(ie,[["__scopeId","data-v-1b00dd4e"]]);export{ye as default};
