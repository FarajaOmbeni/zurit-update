import{r as c,c as _,o as a,w as b,d as g,a as e,f as p,u as i,m as P,P as M,b as l,t as n,h as T,j as U,v as F,F as A,i as j,n as I,W as B}from"./app-CutGg6Ru.js";import{_ as W}from"./AdminSidebar-iqP01z3O.js";import{_ as q}from"./Alert-GPUqUBMt.js";import{_ as z}from"./ConfirmationModal-DUfpIGsW.js";import{u as L}from"./useAlert-D_YH-Jyy.js";import"./EllipsisHorizontalIcon-kXFCPJ9C.js";import"./UserIcon-oypbSjwA.js";const O={class:"space-y-6"},Q={class:"mb-6"},G={class:"bg-white rounded-lg shadow-md p-6"},J={class:"flex items-start space-x-6"},K={class:"w-24 h-24 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center"},X=["src","alt"],Y={key:1,class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Z={class:"flex-1"},ee={class:"flex justify-between items-start"},se={class:"text-2xl font-bold text-gray-900"},te={class:"text-lg text-gray-600"},oe={class:"flex space-x-2"},ae={class:"mt-4 space-y-2"},ne={class:"flex items-center space-x-2"},le={class:"text-gray-600"},re={class:"flex items-center space-x-2"},ie={class:"text-gray-600"},ce={key:0,class:"mt-4"},de={class:"text-gray-600"},ue={class:"bg-white rounded-lg shadow-md p-6"},he={class:"flex justify-between items-center mb-6"},me={class:"text-sm text-gray-500"},ve={class:"mb-6 p-4 bg-gray-50 rounded-lg"},ge={class:"flex space-x-3"},xe={key:0,class:"mt-4 space-y-2"},fe={class:"font-medium text-gray-900"},ye={class:"text-sm text-gray-600"},pe={key:0,class:"text-xs text-orange-600"},we=["onClick","disabled"],be={key:1,class:"mt-4 text-center py-4"},ke={key:0,class:"space-y-4"},Ce={class:"flex justify-between items-start"},_e={class:"font-semibold text-gray-900"},Me={class:"text-sm text-gray-600"},Ae={class:"mt-2 flex space-x-4 text-sm text-gray-500"},je=["onClick"],Be={key:1,class:"text-center py-8"},De={__name:"CoachingShow",props:{coach:Object},setup(o){const k=o,{alertState:h,openAlert:x,clearAlert:R}=L(),d=c(""),u=c([]),w=c(!1),f=c(!1),y=c(!1),m=c(null),v=c(null),C=async()=>{if(!d.value.trim()){u.value=[];return}w.value=!0;try{const s=await(await fetch(`/admin/coaching/search-users?query=${encodeURIComponent(d.value)}`)).json();u.value=s.users||[]}catch(r){console.error("Error searching users:",r),u.value=[]}finally{w.value=!1}},S=r=>{m.value=r,f.value=!0},E=()=>{m.value&&B.post(route("coaching.assign-user",k.coach.id),{user_id:m.value},{onSuccess:()=>{x("success","Client assigned to coach successfully!",5e3),u.value=[],d.value=""},onError:r=>{x("danger","Error assigning client. Please try again.",5e3)}}),f.value=!1,m.value=null},N=()=>{f.value=!1,m.value=null},V=r=>{v.value=r,y.value=!0},$=()=>{v.value&&B.post(route("coaching.remove-user",k.coach.id),{user_id:v.value},{onSuccess:()=>{x("success","Client removed from coach successfully!",5e3)},onError:r=>{x("danger","Error removing client. Please try again.",5e3)}}),y.value=!1,v.value=null},D=()=>{y.value=!1,v.value=null};return(r,s)=>(a(),_(W,{title:"Coach Details"},{default:b(()=>[g(i(P),{title:"Coach Details"}),e("div",O,[e("div",Q,[g(i(M),{href:r.route("coaching.index"),class:"text-purple-600 hover:text-purple-700 flex items-center space-x-2"},{default:b(()=>s[1]||(s[1]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),e("span",null,"Back to Coaches",-1)])),_:1},8,["href"])]),e("div",G,[e("div",J,[e("div",K,[o.coach.photo?(a(),l("img",{key:0,src:`/storage/coaches/${o.coach.photo}`,alt:o.coach.name,class:"w-full h-full object-cover"},null,8,X)):(a(),l("svg",Y,s[2]||(s[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)])))]),e("div",Z,[e("div",ee,[e("div",null,[e("h2",se,n(o.coach.name),1),e("p",te,n(o.coach.email),1)]),e("div",oe,[g(i(M),{href:r.route("coaching.edit",o.coach.id),class:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg"},{default:b(()=>s[3]||(s[3]=[T(" Edit Coach ")])),_:1},8,["href"])])]),e("div",ae,[e("div",ne,[s[4]||(s[4]=e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),e("span",le,n(o.coach.phone),1)]),e("div",re,[s[5]||(s[5]=e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),e("span",ie,n(o.coach.users.length)+" clients",1)])]),o.coach.bio?(a(),l("div",ce,[s[6]||(s[6]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Bio",-1)),e("p",de,n(o.coach.bio),1)])):p("",!0)])])]),e("div",ue,[e("div",he,[s[7]||(s[7]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Clients",-1)),e("span",me,n(o.coach.users.length)+" total clients",1)]),e("div",ve,[s[10]||(s[10]=e("h4",{class:"font-semibold text-gray-900 mb-3"},"Assign New Client",-1)),e("div",ge,[U(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>d.value=t),type:"text",placeholder:"Search users by name or email...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",onInput:C},null,544),[[F,d.value]]),e("button",{onClick:C,class:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700"}," Search ")]),u.value.length>0?(a(),l("div",xe,[s[8]||(s[8]=e("h5",{class:"font-medium text-gray-700"},"Search Results:",-1)),(a(!0),l(A,null,j(u.value,t=>(a(),l("div",{key:t.id,class:"flex justify-between items-center p-3 bg-white rounded border"},[e("div",null,[e("p",fe,n(t.name),1),e("p",ye,n(t.email),1),t.coach?(a(),l("p",pe," Currently assigned to: "+n(t.coach.name),1)):p("",!0)]),e("button",{onClick:H=>S(t.id),class:I(["px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",{"opacity-50 cursor-not-allowed":t.coach_id===o.coach.id}]),disabled:t.coach_id===o.coach.id},n(t.coach_id===o.coach.id?"Already Assigned":"Assign"),11,we)]))),128))])):d.value&&!w.value?(a(),l("div",be,s[9]||(s[9]=[e("p",{class:"text-gray-500"},"No users found matching your search.",-1)]))):p("",!0)]),o.coach.users.length>0?(a(),l("div",ke,[s[11]||(s[11]=e("h4",{class:"font-semibold text-gray-900 mb-3"},"Current Clients:",-1)),(a(!0),l(A,null,j(o.coach.users,t=>(a(),l("div",{key:t.id,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50"},[e("div",Ce,[e("div",null,[e("h4",_e,n(t.name),1),e("p",Me,n(t.email),1),e("div",Ae,[e("span",null,n(t.goals_count)+" goals",1),e("span",null,n(t.investments_count)+" investments",1)])]),e("button",{onClick:H=>V(t.id),class:"text-red-600 hover:text-red-700 text-sm"}," Remove ",8,je)])]))),128))])):(a(),l("div",Be,s[12]||(s[12]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No clients assigned",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Use the search above to assign clients to this coach.",-1)])))])]),g(z,{show:f.value,title:"Assign Client",message:"Are you sure you want to assign this client to the coach?",type:"info","confirm-text":"Assign Client",onConfirm:E,onCancel:N},null,8,["show"]),g(z,{show:y.value,title:"Remove Client",message:"Are you sure you want to remove this client from the coach?",type:"warning","confirm-text":"Remove Client",onConfirm:$,onCancel:D},null,8,["show"]),i(h)?(a(),_(q,{key:0,type:i(h).type,message:i(h).message,duration:i(h).duration,"auto-close":i(h).autoClose,onClose:i(R)},null,8,["type","message","duration","auto-close","onClose"])):p("",!0)]),_:1}))}};export{De as default};
