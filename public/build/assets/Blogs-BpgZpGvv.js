import{r as p,C as f,b as _,o as b,d as n,u as l,m as j,w as d,a as i,c as h,f as O,g as x,h as v,t as B,F as P}from"./app-n07EDfkG.js";import{A as W}from"./AuthenticatedLayout-BZOvLtZq.js";import{_ as H}from"./AdminSidebar-D4vJpVDX.js";import{_ as L}from"./AdminTable-DBYu1yFh.js";import{_ as C}from"./Input-DWr-4k8L.js";import{B as V}from"./Button-BTj3S4fq.js";import{_ as E}from"./Select-gEHW5_kd.js";import{_ as S}from"./FileInput-CzkxOamL.js";import{E as k}from"./Editor-Cx3-Zzre.js";import{_ as q}from"./Alert-BQUIg82g.js";import{u as z}from"./useAlert-CfjvQEKi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./EllipsisHorizontalIcon-DhhuCFzi.js";import"./ChartBarIcon-CV9tjnQZ.js";import"./UserIcon-D8Iv1c19.js";import"./CalendarIcon-CJTaUCnJ.js";import"./CalendarDaysIcon-DmnUQvsG.js";import"./DocumentTextIcon-CmoJD4aZ.js";import"./UserGroupIcon-8DpsIo23.js";import"./UsersIcon-C4gtZD4q.js";const G={class:"w-full text-gray-900"},J={key:1,class:"mb-8"},K={key:2,class:"mb-8"},Q={class:"flex gap-4"},_e={__name:"Blogs",props:{blogs:Array},emits:["edit","delete"],setup(F,{emit:R}){const{openAlert:r,clearAlert:T,alertState:u}=z(),m=p(!1),c=p(null),t=f({blog_title:"",blog_image:"",blog_tag:"",content:""});function U(o){m.value=!0,c.value=o.id,t.blog_title=o.blog_title,t.blog_tag=o.blog_tag,t.content=o.blog_message,t.blog_image=null}function A(){t.post(route("blogs.update",c.value),{onSuccess:()=>{const o=g.value.findIndex(e=>e.id===c.value);o>-1&&(g.value[o]={...t}),m.value=!1,t.reset(),r("success","Blog updated successfully!",5e3)},onError:o=>{r("danger",Object.values(o).flat().join(" "),5e3)}})}function D(){m.value=!1,t.reset()}function I(o){confirm(`Delete "${o.blog_title}"? This can't be undone.`)&&f({}).delete(route("blogs.destroy",o.id),{onSuccess:()=>{blogsData.value=blogsData.value.filter(e=>e.id!==o.id),r("success","Blog deleted.",4e3)},onError:()=>r("danger","Could not delete the blog.",4e3)})}const g=p([]),$=p([{key:"blog_title",label:"Name"},{key:"blog_image",label:"Image"},{key:"blog_message",label:"Content"}]),y=[{label:"Personal Finance & Budgeting",value:"Personal Finance & Budgeting"},{label:"Investing & Wealth Management",value:"Investing & Wealth Management"},{label:"Business & Entrepreneurship",value:"Business & Entrepreneurship"},{label:"Tax & Compliance",value:"Tax & Compliance"},{label:"Financial Technology & Trends",value:"Financial Technology & Trends"}],N=F,s=f({blog_title:"",blog_image:"",blog_tag:"",content:""}),w=o=>{s.blog_image=o};g.value=N.blogs;const M=()=>{s.post(route("blogs.store"),{onSuccess:()=>{s.reset(),r("success","Blog added succesfully!",5e3)},onError:o=>{const e=Object.values(o).flat().join(" ");r("danger",e,5e3)}})};return(o,e)=>(b(),_(P,null,[n(l(j),{title:"Dashboard"}),n(W,null,{default:d(()=>[i("div",G,[n(H,null,{default:d(()=>[l(u)?(b(),h(q,{key:0,type:l(u).type,message:l(u).message,duration:l(u).duration,"auto-close":l(u).autoClose,onClose:l(T)},null,8,["type","message","duration","auto-close","onClose"])):O("",!0),e[13]||(e[13]=i("h1",{class:"text-2xl font-bold text-purple-900 mb-8"},"Blogs Management",-1)),m.value?(b(),_("div",K,[e[11]||(e[11]=i("h1",{class:"text-xl font-bold text-purple-900"},"Edit Blog",-1)),i("form",{onSubmit:x(A,["prevent"])},[i("div",null,[n(C,{modelValue:l(t).blog_title,"onUpdate:modelValue":e[4]||(e[4]=a=>l(t).blog_title=a),label:"Title",placeholder:"Enter blog title",id:"title"},null,8,["modelValue"]),n(E,{modelValue:l(t).blog_tag,"onUpdate:modelValue":e[5]||(e[5]=a=>l(t).blog_tag=a),id:"category",options:y,select_title:"Select category",label:"Category"},null,8,["modelValue"]),n(S,{label:"Blog Image",modelValue:l(t).blog_image,"onUpdate:modelValue":e[6]||(e[6]=a=>l(t).blog_image=a),accept:"image/*",onFileSelected:e[7]||(e[7]=a=>l(t).blog_image=a)},null,8,["modelValue"]),n(k,{label:"Content",modelValue:l(t).content,"onUpdate:modelValue":e[8]||(e[8]=a=>l(t).content=a)},null,8,["modelValue"]),i("div",Q,[n(V,{type:"submit"},{default:d(()=>[v(B(l(t).processing?"Updating...":"Save"),1)]),_:1}),n(V,{type:"button",onClick:D},{default:d(()=>e[10]||(e[10]=[v("Cancel")])),_:1})])])],32)])):(b(),_("div",J,[e[9]||(e[9]=i("h1",{class:"text-xl font-bold text-purple-900"},"Add New Blog",-1)),i("form",{onSubmit:x(M,["prevent"])},[i("div",null,[n(C,{modelValue:l(s).blog_title,"onUpdate:modelValue":e[0]||(e[0]=a=>l(s).blog_title=a),label:"Title",placeholder:"Enter blog title",id:"title"},null,8,["modelValue"]),n(E,{modelValue:l(s).blog_tag,"onUpdate:modelValue":e[1]||(e[1]=a=>l(s).blog_tag=a),id:"category",options:y,select_title:"Select category",label:"Category"},null,8,["modelValue"]),n(S,{label:"Blog Image",modelValue:l(s).blog_image,"onUpdate:modelValue":e[2]||(e[2]=a=>l(s).blog_image=a),accept:"image/*",onFileSelected:w},null,8,["modelValue"]),n(k,{label:"Content",modelValue:l(s).content,"onUpdate:modelValue":e[3]||(e[3]=a=>l(s).content=a)},null,8,["modelValue"]),n(V,{type:"submit"},{default:d(()=>[v(B(l(s).processing?"Saving...":"Submit"),1)]),_:1})])],32)])),i("div",null,[e[12]||(e[12]=i("h1",{class:"text-xl font-bold text-purple-900"},"All Blogs",-1)),n(L,{data:g.value,headers:$.value,editable:!0,onEdit:U,onDelete:I},null,8,["data","headers"])])]),_:1})])]),_:1})],64))}};export{_e as default};
