import{l as p,b as m,o as i,a as t,F as I,i as J,t as l,u as s,r as D,y as G,c as T,w as W,d as u,m as z,f as P,n as E,j as Y,k as U}from"./app-DBwCTMkS.js";import{_ as q}from"./CoachSidebar-C1kHgrxe.js";import{_ as H,a as Q,b as R}from"./LiabilitiesTable-mx_a6ORZ.js";import{_ as X}from"./DebtsTable-CVQ_qX1j.js";import{_ as Z}from"./IncomeExpenseTrendChart-BCzfbs4l.js";import{f as tt}from"./useDateFormat-pjOuPPEs.js";import{f as C}from"./useFormatCurrency-DPZVhC5N.js";import{_ as et}from"./InvestmentChart-oZ8P28cy.js";import"./CalendarDaysIcon-A06HuyGz.js";import"./HomeIcon-leUBeDaX.js";import"./UserIcon-Bz00NNBO.js";import"./index-CxfOsZ-q.js";const st={class:"overflow-x-auto"},ot={class:"min-w-full bg-white border border-gray-200"},lt={class:"text-gray-700"},at={class:"px-4 py-2"},nt={class:"px-4 py-2"},rt={class:"px-4 py-2 text-right"},it={class:"bg-gray-100 font-bold"},dt={class:"px-4 py-2 text-right"},ct={__name:"GoalTable",props:{goals:{type:Array,default:()=>[]}},setup(g){const b=g,d=p(()=>b.goals.reduce((h,n)=>h+Number(n.target_amount||0),0));return(h,n)=>(i(),m("div",st,[t("table",ot,[n[2]||(n[2]=t("thead",{class:"bg-purple-500 text-white"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"Goal Name"),t("th",{class:"px-4 py-2 text-left"},"Target Date"),t("th",{class:"px-4 py-2 text-right"},"Target Amount")])],-1)),t("tbody",lt,[(i(!0),m(I,null,J(g.goals,r=>(i(),m("tr",{key:r.id||r.goal_id,class:"border-t"},[t("td",at,l(r.name),1),t("td",nt,l(s(tt)(r.target_date)),1),t("td",rt,l(s(C)(r.target_amount)),1)]))),128))]),t("tfoot",it,[t("tr",null,[n[0]||(n[0]=t("td",{class:"px-4 py-2"},"Totals",-1)),n[1]||(n[1]=t("td",{class:"px-4 py-2"},null,-1)),t("td",dt,l(s(C)(d.value)),1)])])])]))}},ut={class:"space-y-6"},mt={class:"bg-white rounded-lg shadow p-6"},pt={class:"flex items-center justify-between"},gt={class:"text-2xl font-bold text-purple-800"},_t={class:"text-gray-600"},bt={key:0,class:"text-gray-600"},ht={class:"text-right"},xt={class:"bg-white rounded-lg shadow p-6"},ft={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4"},vt={class:"text-xl font-bold text-purple-800"},yt={class:"w-full md:w-64"},wt=["value"],$t={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},At={class:"bg-gray-50 rounded-lg p-4"},Mt={class:"text-2xl font-semibold text-green-600"},St={class:"bg-gray-50 rounded-lg p-4"},Nt={class:"text-2xl font-semibold text-red-600"},kt={class:"bg-gray-50 rounded-lg p-4"},Bt={class:"bg-white rounded-lg shadow p-6"},Dt={class:"bg-white rounded-lg shadow p-6"},Tt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Et={class:"bg-white rounded-lg shadow p-6"},Ct={key:1,class:"text-gray-500"},It={class:"bg-white rounded-lg shadow p-6"},Jt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Lt={class:"bg-white rounded-lg shadow p-6"},Ot={class:"space-y-6"},jt={class:"bg-white rounded-lg shadow p-6"},Ft={class:"bg-white rounded-lg shadow p-6"},Xt={__name:"ClientProfile",props:{client:Object,incomes:Array,expenses:Array,transactions:Array,goals:Array,investments:Array,debts:Array,assetsBasic:Array,liabilitiesBasic:Array,netWorth:Number},setup(g){const b=g,{client:d,incomes:h,expenses:n,transactions:r,goals:x,investments:L,debts:O,assetsBasic:v,liabilitiesBasic:y,netWorth:w}=b,c=D(null),_=D([]);function $(o){return`${["January","February","March","April","May","June","July","August","September","October","November","December"][o.getMonth()]} ${o.getFullYear()}`}function A(o){return["January","February","March","April","May","June","July","August","September","October","November","December"].indexOf(o.split(" ")[0])}function j(){const o={};(r||[]).forEach(e=>{if(!e.transaction_date)return;const a=new Date(e.transaction_date);isNaN(a.getTime())||(o[$(a)]=!0)}),_.value=Object.keys(o).sort((e,a)=>{const[f,F]=e.split(" "),[K,V]=a.split(" ");return parseInt(V)-parseInt(F)||A(K)-A(f)}),_.value.length>0&&M(_.value[0])}function M(o){c.value=o}G(()=>{j()});const S=p(()=>c.value?(r||[]).filter(o=>{const e=new Date(o.transaction_date);return $(e)===c.value}):[]),N=p(()=>S.value.filter(o=>o.type==="income").reduce((o,e)=>o+Number(e.amount||0),0)),k=p(()=>S.value.filter(o=>o.type!=="income").reduce((o,e)=>o+Number(e.amount||0),0)),B=p(()=>N.value-k.value);return(o,e)=>(i(),T(q,{title:`Client: ${s(d).name}`},{default:W(()=>[u(s(z),{title:`${s(d).name} • Profile`},null,8,["title"]),t("div",ut,[t("div",mt,[t("div",pt,[t("div",null,[t("h2",gt,l(s(d).name),1),t("p",_t,l(s(d).email),1),s(d).phone_number?(i(),m("p",bt,l(s(d).phone_number),1)):P("",!0)]),t("div",ht,[e[2]||(e[2]=t("p",{class:"text-sm text-gray-500"},"Net Worth",-1)),t("p",{class:E([s(w)>=0?"text-green-600":"text-red-600","text-2xl font-semibold"])},"KES "+l(Math.round(s(w)).toLocaleString()),3)])])]),t("div",xt,[t("div",ft,[t("h3",vt,"Budget Overview — "+l(c.value||"N/A"),1),t("div",yt,[e[3]||(e[3]=t("label",{for:"monthSelect",class:"block text-sm font-medium text-gray-700 mb-1"},"Select Month",-1)),Y(t("select",{id:"monthSelect","onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),onChange:e[1]||(e[1]=a=>M(c.value)),class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm"},[(i(!0),m(I,null,J(_.value,(a,f)=>(i(),m("option",{key:f,value:a},l(a),9,wt))),128))],544),[[U,c.value]])])]),t("div",$t,[t("div",At,[e[4]||(e[4]=t("div",{class:"text-sm text-gray-500"},"Total Income",-1)),t("div",Mt,"KES "+l(N.value.toLocaleString()),1)]),t("div",St,[e[5]||(e[5]=t("div",{class:"text-sm text-gray-500"},"Total Expenses",-1)),t("div",Nt,"KES "+l(k.value.toLocaleString()),1)]),t("div",kt,[e[6]||(e[6]=t("div",{class:"text-sm text-gray-500"},"Balance",-1)),t("div",{class:E([B.value>=0?"text-green-600":"text-red-600","text-2xl font-semibold"])},"KES "+l(B.value.toLocaleString()),3)])])]),t("div",Bt,[u(H,{assets:s(v),liabilities:s(y)},null,8,["assets","liabilities"])]),t("div",Dt,[u(Z,{transactions:s(r)},null,8,["transactions"])]),t("div",Tt,[t("div",Et,[e[7]||(e[7]=t("h3",{class:"text-xl font-bold text-purple-800 mb-4"},"Goals",-1)),s(x)&&s(x).length?(i(),T(ct,{key:0,goals:s(x)},null,8,["goals"])):(i(),m("div",Ct,"No goals yet."))]),t("div",It,[e[8]||(e[8]=t("h3",{class:"text-xl font-bold text-purple-800 mb-4"},"Debts",-1)),u(X,{debts:s(O)},null,8,["debts"])])]),t("div",Jt,[t("div",Lt,[e[9]||(e[9]=t("h3",{class:"text-xl font-bold text-purple-800 mb-4"},"Investments",-1)),u(et,{investments:s(L)},null,8,["investments"])]),t("div",Ot,[t("div",jt,[u(Q,{assets:s(v)},null,8,["assets"])]),t("div",Ft,[u(R,{liabilities:s(y)},null,8,["liabilities"])])])])])]),_:1},8,["title"]))}};export{Xt as default};
