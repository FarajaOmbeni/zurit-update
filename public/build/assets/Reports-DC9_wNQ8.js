import{r as C,C as R,b as l,o as a,d as v,u as o,m as S,w as D,a as e,f as u,g as F,j as p,l as y,t as d,v as w,h as V,F as x,i as _}from"./app-DY8zQZZl.js";import{_ as B}from"./MSMESidebar-C0IhIF38.js";import{u as j}from"./useFormatCurrency-Dh16EV-S.js";import{f as g}from"./useDateFormat-pjOuPPEs.js";import"./DocumentTextIcon-BNXvhI-K.js";import"./ChartBarIcon-DjXQXprz.js";import"./HomeIcon-D-upfoBD.js";const L={class:"py-6"},z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},G={key:0,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},N={class:"p-6"},P={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},T={key:0,class:"mt-1 text-sm text-red-600"},E={key:0,class:"mt-1 text-sm text-red-600"},A={key:0,class:"mt-1 text-sm text-red-600"},H={key:0,class:"mt-1 text-sm text-red-600"},$={class:"flex justify-end space-x-3 pt-4"},q=["disabled"],U={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},O={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},Y={class:"p-6"},I={key:0,class:"space-y-4"},J={class:"flex items-center"},K={class:"text-sm text-gray-600"},Q={class:"text-sm text-gray-500"},W={class:"flex space-x-2"},X=["onClick"],Z=["onClick"],ee={key:1,class:"text-center py-8 text-gray-500"},te={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},se={class:"p-6"},oe={key:0,class:"space-y-4"},re={class:"flex items-center"},le={class:"text-sm text-gray-600"},ae={class:"text-sm text-gray-500"},ne={class:"flex space-x-2"},de=["onClick"],ie=["onClick"],ue={key:1,class:"text-center py-8 text-gray-500"},be={__name:"Reports",props:{profitLossReports:Array,balanceSheetReports:Array},setup(c){const{formatCurrency:h}=j(),f=C(!1),r=R({type:"",format:"",start_date:"",end_date:""}),k=()=>{f.value=!0;const n=new Date,t=new Date(n.getFullYear(),n.getMonth(),1),s=new Date(n.getFullYear(),n.getMonth()+1,0);r.start_date=t.toISOString().split("T")[0],r.end_date=s.toISOString().split("T")[0]},b=()=>{f.value=!1,r.reset()},M=()=>{r.post(route("msme.generate-report"),{onSuccess:n=>{b(),console.log("Report generated successfully")},onError:n=>{console.error("Report generation failed:",n)}})},m=(n,t,s)=>{let i=null;n==="profit_loss"?i=route("profit-loss.download",{profitLossRecord:t,format:s}):n==="balance_sheet"&&(i=route("balance-sheet.download",{balanceSheetRecord:t,format:s})),i&&(window.location.href=i)};return(n,t)=>(a(),l(x,null,[v(o(S),{title:"Financial Reports"}),v(B,{title:"Financial Reports"},{default:D(()=>[e("div",L,[e("div",z,[e("div",{class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},[e("div",{class:"p-6"},[e("div",{class:"flex flex-col md:flex-row justify-between items-start md:items-center"},[t[4]||(t[4]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"}," Financial Reports "),e("p",{class:"text-gray-600 mt-2"}," Generate and download your business financial reports ")],-1)),e("div",{class:"mt-4 md:mt-0"},[e("button",{onClick:k,class:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors"}," Generate New Report ")])])])]),f.value?(a(),l("div",G,[e("div",N,[t[12]||(t[12]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Generate Report ",-1)),e("form",{onSubmit:F(M,["prevent"]),class:"space-y-4"},[e("div",P,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Report Type *",-1)),p(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>o(r).type=s),required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500"},t[5]||(t[5]=[e("option",{value:""}," Select Report Type ",-1),e("option",{value:"profit_loss"}," Profit & Loss Statement ",-1),e("option",{value:"balance_sheet"}," Balance Sheet ",-1),e("option",{value:"cashflow"}," Cash Flow Statement ",-1)]),512),[[y,o(r).type]]),o(r).errors.type?(a(),l("p",T,d(o(r).errors.type),1)):u("",!0)]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Format *",-1)),p(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>o(r).format=s),required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500"},t[7]||(t[7]=[e("option",{value:""},"Select Format",-1),e("option",{value:"pdf"},"PDF",-1),e("option",{value:"excel"},"Excel",-1)]),512),[[y,o(r).format]]),o(r).errors.format?(a(),l("p",E,d(o(r).errors.format),1)):u("",!0)]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Start Date *",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o(r).start_date=s),type:"date",required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500"},null,512),[[w,o(r).start_date]]),o(r).errors.start_date?(a(),l("p",A,d(o(r).errors.start_date),1)):u("",!0)]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"End Date *",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o(r).end_date=s),type:"date",required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500"},null,512),[[w,o(r).end_date]]),o(r).errors.end_date?(a(),l("p",H,d(o(r).errors.end_date),1)):u("",!0)])]),e("div",$,[e("button",{onClick:b,type:"button",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500"}," Cancel "),e("button",{type:"submit",disabled:o(r).processing,class:"px-4 py-2 bg-purple-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50"},[o(r).processing?(a(),l("svg",U,t[11]||(t[11]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):u("",!0),V(" "+d(o(r).processing?"Generating...":"Generate Report"),1)],8,q)])],32)])])):u("",!0),e("div",O,[e("div",Y,[t[16]||(t[16]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Profit & Loss Reports ",-1)),c.profitLossReports.length>0?(a(),l("div",I,[(a(!0),l(x,null,_(c.profitLossReports,s=>(a(),l("div",{key:s.id,class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50"},[e("div",J,[t[14]||(t[14]=e("div",{class:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-4"},[e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",null,[t[13]||(t[13]=e("p",{class:"font-medium text-gray-900"}," P&L Statement ",-1)),e("p",K,d(o(g)(s.period_start))+" - "+d(o(g)(s.period_end)),1),e("p",Q," Net Profit: "+d(o(h)(s.net_profit)),1)])]),e("div",W,[e("button",{onClick:i=>m("profit_loss",s.id,"pdf"),class:"text-blue-600 hover:text-blue-800 text-sm"}," Download PDF ",8,X),e("button",{onClick:i=>m("profit_loss",s.id,"excel"),class:"text-green-600 hover:text-green-800 text-sm"}," Download Excel ",8,Z)])]))),128))])):(a(),l("div",ee,t[15]||(t[15]=[e("svg",{class:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),e("p",null,"No Profit & Loss reports generated yet",-1)])))])]),e("div",te,[e("div",se,[t[20]||(t[20]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Balance Sheet Reports ",-1)),c.balanceSheetReports.length>0?(a(),l("div",oe,[(a(!0),l(x,null,_(c.balanceSheetReports,s=>(a(),l("div",{key:s.id,class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50"},[e("div",re,[t[18]||(t[18]=e("div",{class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-4"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})])],-1)),e("div",null,[t[17]||(t[17]=e("p",{class:"font-medium text-gray-900"}," Balance Sheet ",-1)),e("p",le," As of "+d(o(g)(s.as_of_date)),1),e("p",ae," Total Assets: "+d(o(h)(s.total_assets)),1)])]),e("div",ne,[e("button",{onClick:i=>m("balance_sheet",s.id,"pdf"),class:"text-blue-600 hover:text-blue-800 text-sm"}," Download PDF ",8,de),e("button",{onClick:i=>m("balance_sheet",s.id,"excel"),class:"text-green-600 hover:text-green-800 text-sm"}," Download Excel ",8,ie)])]))),128))])):(a(),l("div",ue,t[19]||(t[19]=[e("svg",{class:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),e("p",null,"No Balance Sheet reports generated yet",-1)])))])])])])]),_:1})],64))}};export{be as default};
