import{r as k,z as q,l as E,C as R,b as m,o as i,c as A,f as M,a as e,u as o,j as d,t as c,n as C,d as w,h as S,Q as U,U as W,g as $,v,F as D,X,m as J,w as H,i as L,k as Z}from"./app-CHmLdWYj.js";import{A as ee}from"./AuthenticatedLayout-D1pzdNaa.js";import{_ as te}from"./Sidebar-B9W6MWES.js";import{_ as se}from"./DashboardBackButton-CNNSPciy.js";import{f as oe}from"./useDateFormat-pjOuPPEs.js";import{u as I}from"./useAlert-Ceqvotnt.js";import{_ as K}from"./Alert-5Hv3uQM4.js";import{P as le,T as ae,X as P}from"./x-k2oCfnwn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                */import"./EllipsisHorizontalIcon-XaWeg8VV.js";import"./AcademicCapIcon-DMcu_D0p.js";import"./UserIcon-BQxOTnO0.js";import"./HomeIcon-D3WUbx7-.js";const re={class:"bg-white shadow rounded-lg p-4 border-2 border-purple-500"},ne={class:"flex justify-between items-center border-b pb-2 mb-2"},ue={class:"text-lg font-semibold text-purple-700"},ie={class:"flex items-center space-x-2"},de={class:"mt-1"},pe={class:"mt-1"},me={class:"mt-1"},ce={class:"mt-1"},ge={class:"w-full bg-gray-200 rounded-full h-2.5 mt-2"},ve={class:"flex justify-between items-center mb-2"},fe={class:"grid grid-cols-2 gap-x-2 gap-y-2"},xe={class:"col-span-2"},be={class:"col-span-2"},ye={class:"col-span-1"},we={class:"col-span-1"},_e={class:"col-span-2"},he={class:"mt-3 flex justify-end space-x-2"},ke=["disabled"],Ce={class:"flex justify-between items-center mb-4"},Se={class:"flex justify-end space-x-3"},$e={class:"px-3 py-1.5 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},Y={__name:"GoalCard",props:{goal:Object},emits:["update","delete"],setup(F,{emit:_}){const{alertState:b,openAlert:h,clearAlert:G}=I(),y=F,V=_,l=k({...y.goal});q(()=>y.goal,n=>{l.value={...n}},{deep:!0});const B=E(()=>l.value.target_amount===0?0:Math.min(100,l.value.current_amount/l.value.target_amount*100)),f=n=>"KES "+Math.round(n).toLocaleString(),x=k(!1),a=R({name:"",description:"",target_amount:"",start_date:"",duration_months:"",duration_years:"",target_date:"",commitment:!1}),T=()=>{a.name=l.value.name,a.description=l.value.description,a.target_amount=l.value.target_amount,a.start_date=new Date(l.value.start_date).toISOString().split("T")[0]||"",a.target_date=new Date(l.value.target_date).toISOString().split("T")[0]||""},N=()=>{x.value=!1};q(x,n=>{n&&T()});const j=()=>{a.put(route("goal.update",l.value.id),{preserveScroll:!0,onSuccess:n=>{var t;(t=n==null?void 0:n.props)!=null&&t.goal?l.value=n.props.goal:l.value={...l.value,name:a.name,description:a.description,target_amount:a.target_amount,start_date:a.start_date,duration_months:a.duration_months,duration_years:a.duration_years},x.value=!1,h("success","Goal Updated Successfully."),V("update",l.value)},onError:n=>{const t=Object.values(n).flat().join(" ");h("danger",t,5e3)}})},g=k(!1),p=()=>{g.value=!1},s=k(!1),r=()=>{s.value=!0,X.post(route("goal.destroy",l.value.id)).then(()=>{g.value=!1,h("success","Goal deleted successfully."),V("delete",l.value.id)}).catch(n=>{s.value=!1,h("danger","Failed to delete goal. Please try again.",5e3),console.error("Error deleting goal:",n)})},O=E(()=>{const n=new Date(l.value.start_date),t=new Date(l.value.target_date),u=t.getFullYear()-n.getFullYear(),Q=t.getMonth()-n.getMonth(),z=u*12+Q;return z<=0?0:l.value.target_amount/z});return(n,t)=>(i(),m(D,null,[o(b)?(i(),A(K,{key:0,type:o(b).type,message:o(b).message,duration:o(b).duration,"auto-close":o(b).autoClose,onClose:o(G)},null,8,["type","message","duration","auto-close","onClose"])):M("",!0),e("div",re,[e("div",ne,[e("h3",ue,c(l.value.name),1),e("div",ie,[e("span",{class:C(["px-2 py-1 text-xs font-bold uppercase rounded-full",{"bg-yellow-400 text-black":l.value.status==="in_progress","bg-green-500 text-white":l.value.status==="achieved","bg-gray-400 text-black":l.value.status==="abandoned"}])},c(l.value.status),3),e("button",{onClick:t[0]||(t[0]=u=>x.value=!0),class:C(["p-1 text-purple-600 hover:text-purple-800 transition-colors",{hidden:l.value.status==="achieved"}])},[w(o(le),{class:"h-4 w-4"})],2),e("button",{onClick:t[1]||(t[1]=u=>g.value=!0),class:C(["p-1 text-red-600 hover:text-red-800 transition-colors",{hidden:l.value.status==="achieved"}])},[w(o(ae),{class:"h-4 w-4"})],2)])]),e("div",{class:C(["mb-2",l.value.status==="in_progress"?"text-gray-600":"text-green-500"])},[e("p",null,c(l.value.description),1),e("p",de,[t[13]||(t[13]=e("strong",null,"Goal:",-1)),S(" "+c(f(l.value.target_amount)),1)]),e("p",pe,[t[14]||(t[14]=e("strong",null,"Saved:",-1)),S(" "+c(f(l.value.current_amount)),1)]),d(e("p",me,[t[15]||(t[15]=e("strong",null,"Remaining:",-1)),S(" "+c(f(l.value.target_amount-l.value.current_amount)),1)],512),[[U,l.value.status==="in_progress"]]),d(e("p",ce,[t[16]||(t[16]=e("strong",null,"Minimum Contribution:",-1)),S(" "+c(f(O.value)),1)],512),[[U,l.value.status==="in_progress"]]),e("div",ge,[e("div",{class:C([l.value.status==="in_progress"?"bg-yellow-400":"bg-green-500","h-2.5 rounded-full"]),style:W({width:B.value+"%"})},null,6)])],2),d(e("div",{class:"text-right text-sm text-gray-500"}," Target Date: "+c(o(oe)(l.value.target_date)),513),[[U,l.value.status==="in_progress"]]),x.value?(i(),m("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:N},[e("div",{class:"bg-white rounded-lg p-3 w-full max-w-sm mx-4",onClick:t[9]||(t[9]=$(()=>{},["stop"]))},[e("div",ve,[t[17]||(t[17]=e("h3",{class:"text-base font-medium text-purple-700"},"Edit Goal",-1)),e("button",{onClick:t[2]||(t[2]=u=>x.value=!1),class:"text-gray-500 hover:text-gray-700"},[w(o(P),{class:"h-4 w-4"})])]),e("form",{onSubmit:$(j,["prevent"])},[e("div",fe,[e("div",xe,[t[18]||(t[18]=e("label",{for:"name",class:"block text-xs font-medium text-gray-700"},"Name",-1)),d(e("input",{type:"text",id:"name","onUpdate:modelValue":t[3]||(t[3]=u=>o(a).name=u),class:"mt-0.5 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 text-xs py-1.5 px-2"},null,512),[[v,o(a).name]])]),e("div",be,[t[19]||(t[19]=e("label",{for:"target_amount",class:"block text-xs font-medium text-gray-700"},"Target Amount",-1)),d(e("input",{type:"number",id:"target_amount","onUpdate:modelValue":t[4]||(t[4]=u=>o(a).target_amount=u),class:"mt-0.5 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 text-xs py-1.5 px-2"},null,512),[[v,o(a).target_amount]])]),e("div",ye,[t[20]||(t[20]=e("label",{for:"start_date",class:"block text-xs font-medium text-gray-700"},"Start Date",-1)),d(e("input",{type:"date",id:"start_date","onUpdate:modelValue":t[5]||(t[5]=u=>o(a).start_date=u),class:"mt-0.5 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 text-xs py-1.5 px-2"},null,512),[[v,o(a).start_date]])]),e("div",we,[t[21]||(t[21]=e("label",{for:"target_date",class:"block text-xs font-medium text-gray-700"},"Due Date",-1)),d(e("input",{type:"date",id:"target_date","onUpdate:modelValue":t[6]||(t[6]=u=>o(a).target_date=u),class:"mt-0.5 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 text-xs py-1.5 px-2"},null,512),[[v,o(a).target_date]])]),e("div",_e,[t[22]||(t[22]=e("label",{for:"description",class:"block text-xs font-medium text-gray-700"},"Description",-1)),d(e("textarea",{id:"description","onUpdate:modelValue":t[7]||(t[7]=u=>o(a).description=u),rows:"2",class:"mt-0.5 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 text-xs py-1.5 px-2"},null,512),[[v,o(a).description]])])]),e("div",he,[e("button",{type:"button",onClick:t[8]||(t[8]=u=>x.value=!1),class:"px-2 py-1 border border-gray-300 rounded-md shadow-sm text-xs font-medium text-gray-700 bg-white hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:o(a).processing,class:"px-2 py-1 border border-transparent rounded-md shadow-sm text-xs font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-1 focus:ring-purple-500"},c(o(a).processing?"Saving...":"Save Changes"),9,ke)])],32)])])):M("",!0),g.value?(i(),m("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:p},[e("div",{class:"bg-white rounded-lg p-5 w-full max-w-sm mx-4",onClick:t[12]||(t[12]=$(()=>{},["stop"]))},[e("div",Ce,[t[23]||(t[23]=e("h3",{class:"text-lg font-semibold text-red-600"},"Delete Goal",-1)),e("button",{onClick:t[10]||(t[10]=u=>g.value=!1),class:"text-gray-500 hover:text-gray-700"},[w(o(P),{class:"h-5 w-5"})])]),t[24]||(t[24]=e("p",{class:"text-gray-700 mb-4"},"Are you sure you want to delete this goal? This action cannot be undone. ",-1)),e("div",Se,[e("button",{onClick:t[11]||(t[11]=u=>g.value=!1),class:"px-3 py-1.5 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"}," Cancel "),e("form",{onSubmit:$(r,["prevent"])},[e("button",$e,c(s.value?"Deleting...":"Delete"),1)],32)])])])):M("",!0)])],64))}},De=[{value:"emergency_fund",label:"Emergency Fund"},{value:"school_fees",label:"School Fees"},{value:"business_startup",label:"Start a Business"},{value:"home_construction",label:"Build a Home"},{value:"home_purchase",label:"Buy a Home"},{value:"vehicle_purchase",label:"Buy a Vehicle"},{value:"travel",label:"Travel / Vacation"},{value:"wedding",label:"Wedding"},{value:"medical_expenses",label:"Medical Expenses"},{value:"debt_repayment",label:"Debt Repayment"},{value:"retirement",label:"Retirement Savings"},{value:"education",label:"Further Education"},{value:"electronics",label:"Buy Electronics"},{value:"furniture",label:"Buy Furniture"},{value:"other",label:"Other"}],Me={class:"w-full text-gray-900"},Ge={class:"container mx-auto p-4"},Ve={class:"container mx-auto p-4"},je={class:"mb-8"},Ae={key:0,class:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},Ue={key:1,class:"text-gray-600"},Ee={key:0,class:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},Fe={key:1,class:"text-gray-600"},Be={class:"bg-white rounded-lg shadow-xl w-full max-w-sm mx-4 overflow-hidden"},Te={class:"grid grid-cols-2 gap-x-2 gap-y-2"},Ne={class:"col-span-2"},Le=["value"],Oe={class:"col-span-2"},ze={class:"relative"},qe={class:"col-span-1"},He={class:"col-span-1"},Pe={class:"flex gap-2"},Ye={class:"flex-1"},Re={class:"flex-1"},Ie={class:"col-span-2"},Ke={class:"flex justify-end space-x-2 mt-3"},Qe={type:"submit",class:"px-2 py-1 text-xs bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-1 focus:ring-purple-500"},dt={__name:"GoalSetting",props:{goals:Array},setup(F){const{alertState:_,openAlert:b,clearAlert:h}=I(),G=F,y=k([...G.goals]),V=p=>{y.value=y.value.filter(s=>s.id!==p)},l=k(!1),B=()=>{l.value=!0},f=()=>{l.value=!1,T()},x=p=>{p.target.classList.contains("modal-overlay")&&f()},a=R({name:"",description:"",target_amount:"",start_date:"",duration_months:"",duration_years:"",commitment:!1}),T=()=>{a.reset()},N=()=>{a.post(route("goal.store"),{onSuccess:p=>{a.reset(),f(),b("success","Goal added successfully",5e3),window.location.reload()},onError:p=>{const s=Object.values(p).flat().join(" ");b("danger",s,5e3)}})},j=E(()=>y.value.filter(p=>p.status!=="achieved")),g=E(()=>y.value.filter(p=>p.status==="achieved"));return(p,s)=>(i(),m(D,null,[w(o(J),{title:"Goal Setting"}),w(ee,null,{default:H(()=>[e("div",Me,[w(te,null,{default:H(()=>[w(se),e("div",Ge,[e("div",{class:"flex justify-between items-center mb-6"},[s[8]||(s[8]=e("h1",{class:"text-2xl font-bold text-purple-700"},"Your Goals",-1)),e("button",{onClick:B,class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center transition-colors duration-200"},s[7]||(s[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),S(" Add Goal ")]))]),e("div",Ve,[o(_)?(i(),A(K,{key:0,type:o(_).type,message:o(_).message,duration:o(_).duration,"auto-close":o(_).autoClose,onClose:o(h)},null,8,["type","message","duration","auto-close","onClose"])):M("",!0),e("section",je,[s[9]||(s[9]=e("h2",{class:"text-xl font-semibold text-purple-700 mb-4"},"Active Goals",-1)),j.value.length?(i(),m("div",Ae,[(i(!0),m(D,null,L(j.value,r=>(i(),A(Y,{key:r.id||r.goal_id,goal:r,onUpdate:s[0]||(s[0]=O=>y.value.value=[...G.goals]),onDelete:V},null,8,["goal"]))),128))])):(i(),m("div",Ue," No active goals found. "))]),d(e("section",null,[s[10]||(s[10]=e("h2",{class:"text-xl font-semibold text-purple-700 mb-4"},"Completed Goals",-1)),g.value.length?(i(),m("div",Ee,[(i(!0),m(D,null,L(g.value,r=>(i(),A(Y,{key:r.id||r.goal_id,goal:r},null,8,["goal"]))),128))])):(i(),m("div",Fe," No completed goals found. "))],512),[[U,g.value.length>0]])])])]),_:1})]),l.value?(i(),m("div",{key:0,onClick:x,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 modal-overlay"},[e("div",Be,[e("div",{class:"bg-purple-600 text-white px-3 py-2 flex justify-between items-center"},[s[12]||(s[12]=e("h3",{class:"text-base font-medium"},"Add New Goal",-1)),e("button",{onClick:f,class:"text-white hover:text-gray-200 focus:outline-none"},s[11]||(s[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))]),e("form",{onSubmit:$(N,["prevent"]),class:"p-3"},[e("div",Te,[e("div",Ne,[s[14]||(s[14]=e("label",{for:"type",class:"block text-gray-700 text-xs font-medium mb-1"},"Name",-1)),d(e("select",{id:"type","onUpdate:modelValue":s[1]||(s[1]=r=>o(a).name=r),class:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500",required:""},[s[13]||(s[13]=e("option",{value:"",disabled:""},"Select Name",-1)),(i(!0),m(D,null,L(o(De),r=>(i(),m("option",{key:r.value,value:r.value},c(r.label),9,Le))),128))],512),[[Z,o(a).name]])]),e("div",Oe,[s[16]||(s[16]=e("label",{for:"target_amount",class:"block text-gray-700 text-xs font-medium mb-1"},"Target Amount",-1)),e("div",ze,[s[15]||(s[15]=e("div",{class:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-xs"},"KES")],-1)),d(e("input",{type:"number",id:"target_amount","onUpdate:modelValue":s[2]||(s[2]=r=>o(a).target_amount=r),class:"w-full pl-8 pr-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500",step:"0.01",min:"0",required:""},null,512),[[v,o(a).target_amount]])])]),e("div",qe,[s[17]||(s[17]=e("label",{for:"start_date",class:"block text-gray-700 text-xs font-medium mb-1"},"Start Date",-1)),d(e("input",{type:"date",id:"start_date","onUpdate:modelValue":s[3]||(s[3]=r=>o(a).start_date=r),class:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500",required:""},null,512),[[v,o(a).start_date]])]),e("div",He,[s[18]||(s[18]=e("label",{class:"block text-gray-700 text-xs font-medium mb-1"},"Duration",-1)),e("div",Pe,[e("div",Ye,[d(e("input",{type:"number",min:"0","onUpdate:modelValue":s[4]||(s[4]=r=>o(a).duration_years=r),placeholder:"Years",class:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500",required:""},null,512),[[v,o(a).duration_years]])]),e("div",Re,[d(e("input",{type:"number",min:"0",max:"11","onUpdate:modelValue":s[5]||(s[5]=r=>o(a).duration_months=r),placeholder:"Months",class:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500",required:""},null,512),[[v,o(a).duration_months]])])])]),e("div",Ie,[s[19]||(s[19]=e("label",{for:"description",class:"block text-gray-700 text-xs font-medium mb-1"},"Description",-1)),d(e("textarea",{id:"description","onUpdate:modelValue":s[6]||(s[6]=r=>o(a).description=r),class:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500",rows:"2"},null,512),[[v,o(a).description]])]),s[20]||(s[20]=e("div",{class:"col-span-2"},[e("label",{for:"contribution",class:"block text-gray-700 text-xs font-medium mb-1"},"How often will you contribute to this goal?"),e("select",{name:"contribution",id:"",class:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500"},[e("option",{value:""},"Weekly"),e("option",{value:"",selected:""},"Monthly"),e("option",{value:"",selected:""},"Quarterly")])],-1))]),e("div",Ke,[e("button",{type:"button",onClick:f,class:"px-2 py-1 text-xs border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-1 focus:ring-purple-500"}," Cancel "),e("button",Qe,c(o(a).processing?"Saving...":"Add Goal"),1)])],32)])])):M("",!0)]),_:1})],64))}};export{dt as default};
