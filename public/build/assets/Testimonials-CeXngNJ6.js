import{r as f,C as b,b as v,o as c,d as n,u as t,m as j,w as u,a as s,c as I,f as h,g as y,h as V,t as S,F as H}from"./app-B77KeUmG.js";import{A as M}from"./AuthenticatedLayout-fGlaiisI.js";import{_ as O}from"./AdminSidebar-ee2V4yEp.js";import{E as T}from"./Editor-BNgv_lvi.js";import{_ as L}from"./AdminTable-CMXb2jbJ.js";import{_}from"./Input-CMXxm1kF.js";import{B as x}from"./Button-BYKSnPMA.js";import{_ as E}from"./FileInput-LSvevsEU.js";import{u as q}from"./useAlert-NXtidRHy.js";import{_ as z}from"./Alert-B1lhTR0A.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./EllipsisHorizontalIcon-CY3SYAWs.js";import"./ChartBarIcon-CSVsyvqD.js";import"./UserIcon-Bg7ytq9l.js";import"./CalendarIcon-5K88Rfx9.js";import"./CalendarDaysIcon-Brd16q8d.js";import"./DocumentTextIcon-CWXQShrX.js";import"./UserGroupIcon-CKdvR3Nr.js";import"./UsersIcon-0Y0AkwaV.js";const G={class:"w-full text-gray-900"},J={key:1,class:"mb-12 px-4"},K={key:2,class:"mb-12 px-4"},P={class:"flex gap-4"},ce={__name:"Testimonials",props:{testimonials:Array},emits:["edit","delete"],setup(C,{emit:Q}){const{alertState:d,openAlert:m,clearAlert:k}=q(),p=f(!1),g=f(null),o=b({name:"",image:"",content:""});function A(l){p.value=!0,g.value=l.id,o.name=l.name,o.content=l.content,o.image=null}function N(){o.post(route("testimonials.update",g.value),{onSuccess:()=>{const l=r.value.findIndex(e=>e.id===g.value);l>-1&&(r.value[l]={...o}),p.value=!1,o.reset(),m("success","Testimonial updated successfully!",5e3)},onError:l=>{m("danger",Object.values(l).flat().join(" "),5e3)}})}function w(){p.value=!1,o.reset()}function B(l){confirm(`Delete "${l.name}'s" testimony? This can't be undone.`)&&b({}).delete(route("testimonials.destroy",l.id),{onSuccess:()=>{r.value=r.value.filter(e=>e.id!==l.id),m("success","testimonial deleted.",4e3)},onError:()=>m("danger","Could not delete the testimonial.",4e3)})}const r=f([]),F=f([{key:"name",label:"Name"},{key:"content",label:"Content"}]),U=C;r.value=U.testimonials;const i=b({name:"",image:"",content:""}),$=l=>{i.image=l},D=()=>{i.post(route("testimonials.store"),{onSuccess:()=>{window.location.reload(),m("success","Testimonial added succesfully!",5e3)},onError:l=>{const e=Object.values(l).flat().join(" ");m("danger",e,5e3)}})};return(l,e)=>(c(),v(H,null,[n(t(j),{title:"Dashboard"}),n(M,null,{default:u(()=>[s("div",G,[n(O,null,{default:u(()=>[t(d)?(c(),I(z,{key:0,type:t(d).type,message:t(d).message,duration:t(d).duration,"auto-close":t(d).autoClose,onClose:t(k)},null,8,["type","message","duration","auto-close","onClose"])):h("",!0),p.value?(c(),v("div",K,[e[9]||(e[9]=s("h1",{class:"text-2xl font-bold text-purple-900"},"Edit Testimonials",-1)),s("form",{onSubmit:y(N,["prevent"])},[s("div",null,[n(_,{modelValue:t(o).name,"onUpdate:modelValue":e[3]||(e[3]=a=>t(o).name=a),label:"Name",placeholder:"Enter the testifier name",id:"name"},null,8,["modelValue"]),n(E,{label:"Testifier Image",modelValue:t(o).image,"onUpdate:modelValue":e[4]||(e[4]=a=>t(o).image=a),accept:"image/*",onFileSelected:e[5]||(e[5]=a=>t(o).image=a)},null,8,["modelValue"]),n(T,{label:"Testimonial",modelValue:t(o).content,"onUpdate:modelValue":e[6]||(e[6]=a=>t(o).content=a)},null,8,["modelValue"]),s("div",P,[n(x,{type:"submit"},{default:u(()=>[V(S(t(o).processing?"Saving...":"Save"),1)]),_:1}),n(x,{type:"button",onClick:w},{default:u(()=>e[8]||(e[8]=[V("Cancel")])),_:1})])])],32)])):(c(),v("div",J,[e[7]||(e[7]=s("h1",{class:"text-2xl font-bold text-purple-900"},"Add Testimonials to Homepage",-1)),s("form",{onSubmit:y(D,["prevent"])},[s("div",null,[n(_,{modelValue:t(i).name,"onUpdate:modelValue":e[0]||(e[0]=a=>t(i).name=a),label:"Name",placeholder:"Enter the testifier name",id:"name"},null,8,["modelValue"]),n(E,{label:"Testifier Image",modelValue:t(i).image,"onUpdate:modelValue":e[1]||(e[1]=a=>t(i).image=a),accept:"image/*",onFileSelected:$},null,8,["modelValue"]),n(T,{label:"Testimonial",modelValue:t(i).content,"onUpdate:modelValue":e[2]||(e[2]=a=>t(i).content=a)},null,8,["modelValue"]),n(x,{type:"submit"},{default:u(()=>[V(S(t(i).processing?"Saving...":"Submit"),1)]),_:1})])],32)])),s("div",null,[e[10]||(e[10]=s("h1",{class:"text-2xl font-bold text-purple-900 pl-4 mb-4"},"All Testimonials",-1)),n(L,{data:r.value,headers:F.value,editable:!0,onEdit:A,onDelete:B},null,8,["data","headers"])])]),_:1})])]),_:1})],64))}};export{ce as default};
