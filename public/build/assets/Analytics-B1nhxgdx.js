import{r as N,k as x,b as l,o as n,d as b,u as d,m as E,w as M,a as e,j as V,P as z,h as F,l as I,t as o,n as p,F as u,i as v,M as y}from"./app-n07EDfkG.js";import{_ as L}from"./MSMESidebar-5WSi4Kv6.js";import{u as O}from"./useFormatCurrency-Dh16EV-S.js";import"./CalendarDaysIcon-DmnUQvsG.js";import"./CalculatorIcon-Dvm3kwl0.js";import"./DocumentTextIcon-CmoJD4aZ.js";import"./ChartBarIcon-CV9tjnQZ.js";import"./HomeIcon-lGlJr_Hn.js";const S={class:"py-6"},U={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},$={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},D={class:"p-6"},H={class:"flex flex-col md:flex-row justify-between items-start md:items-center"},q={class:"mt-4 md:mt-0 flex space-x-3"},G={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},J={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},K={class:"p-6"},Q={class:"flex items-center"},R={class:"ml-4"},W={class:"text-2xl font-semibold text-gray-900"},X={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Y={class:"p-6"},Z={class:"flex items-center"},ee={class:"ml-4"},se={class:"text-2xl font-semibold text-gray-900"},te={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},oe={class:"p-6"},le={class:"flex items-center"},ne={class:"flex-shrink-0"},ie={class:"ml-4"},de={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ae={class:"p-6"},re={class:"flex items-center"},ce={class:"ml-4"},me={class:"text-2xl font-semibold text-gray-900"},xe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},ue={class:"p-6"},he={class:"h-64 flex items-end space-x-2"},ge={class:"w-full flex flex-col items-center space-y-1"},ve=["title"],fe=["title"],pe={class:"text-xs text-gray-600 mt-2 text-center"},ye={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},_e={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},we={class:"p-6"},be={key:0,class:"space-y-3"},ke={class:"text-sm text-gray-600 capitalize"},je={class:"flex items-center space-x-2"},Ce={class:"w-24 bg-gray-200 rounded-full h-2"},Me={class:"text-sm font-medium text-gray-900 w-20 text-right"},Be={key:1,class:"text-center py-8 text-gray-500"},Pe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ae={class:"p-6"},Te={key:0,class:"space-y-3"},Ne={class:"text-sm text-gray-600 capitalize"},Ee={class:"flex items-center space-x-2"},Ve={class:"w-24 bg-gray-200 rounded-full h-2"},ze={class:"text-sm font-medium text-gray-900 w-20 text-right"},Fe={key:1,class:"text-center py-8 text-gray-500"},Ie={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},Le={class:"p-6"},Oe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Se={class:"flex items-center justify-between mb-2"},Ue={class:"text-sm font-medium text-gray-900 capitalize"},$e={class:"text-xs text-gray-500"},De={class:"text-lg font-semibold text-gray-900"},He={class:"text-xs text-gray-500"},qe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ge={class:"p-6"},Je={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ke={class:"text-sm font-medium text-gray-900 mb-2"},Qe={class:"space-y-2"},Re={class:"flex justify-between text-sm"},We={class:"font-medium text-green-600"},Xe={class:"flex justify-between text-sm"},Ye={class:"font-medium text-red-600"},Ze={class:"flex justify-between text-sm border-t pt-2"},as={__name:"Analytics",props:{monthlyTrends:Array,categoryBreakdown:Object,paymentMethodAnalysis:Object,forecast:Array,period:String},setup(c){const h=c,{formatCurrency:r}=O(),_=N(h.period),m=x(()=>h.monthlyTrends.reduce((i,s)=>i+s.income,0)),f=x(()=>h.monthlyTrends.reduce((i,s)=>i+s.expenses,0)),g=x(()=>m.value-f.value),B=x(()=>m.value>0?g.value/m.value*100:0),P=x(()=>m.value+f.value),k=x(()=>{const i=Math.max(...h.monthlyTrends.map(t=>t.income)),s=Math.max(...h.monthlyTrends.map(t=>t.expenses));return Math.max(i,s)}),A=()=>{window.location.href=route("cashflow.analytics",{period:_.value})},j=(i,s)=>s===0?0:Math.max(i/s*200,2),w=(i,s)=>s===0?0:(i/s*100).toFixed(1),C=i=>i.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase()),T=i=>i.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase());return(i,s)=>(n(),l(u,null,[b(d(E),{title:"Cashflow Analytics"}),b(L,{title:"Cashflow Analytics"},{default:M(()=>[e("div",S,[e("div",U,[e("div",$,[e("div",D,[e("div",H,[s[3]||(s[3]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"}," Cashflow Analytics "),e("p",{class:"text-gray-600 mt-2"}," Comprehensive analysis of your cash flow patterns and trends ")],-1)),e("div",q,[b(d(z),{href:i.route("cashflow.index"),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"},{default:M(()=>s[1]||(s[1]=[F(" Back to Cashflow ")])),_:1},8,["href"]),V(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>_.value=t),onChange:A,class:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors border-0"},s[2]||(s[2]=[e("option",{value:"1m"},"Last Month",-1),e("option",{value:"3m"},"Last 3 Months",-1),e("option",{value:"6m"},"Last 6 Months",-1),e("option",{value:"12m"},"Last 12 Months",-1)]),544),[[I,_.value]])])])])]),e("div",G,[e("div",J,[e("div",K,[e("div",Q,[s[5]||(s[5]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])])],-1)),e("div",R,[s[4]||(s[4]=e("p",{class:"text-sm font-medium text-gray-500"}," Total Income ",-1)),e("p",W,o(d(r)(m.value)),1)])])])]),e("div",X,[e("div",Y,[e("div",Z,[s[7]||(s[7]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})])])],-1)),e("div",ee,[s[6]||(s[6]=e("p",{class:"text-sm font-medium text-gray-500"}," Total Expenses ",-1)),e("p",se,o(d(r)(f.value)),1)])])])]),e("div",te,[e("div",oe,[e("div",le,[e("div",ne,[e("div",{class:p(["w-8 h-8 rounded-full flex items-center justify-center",g.value>=0?"bg-green-100":"bg-red-100"])},[(n(),l("svg",{class:p(["w-4 h-4",g.value>=0?"text-green-600":"text-red-600"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[8]||(s[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)]),2))],2)]),e("div",ie,[s[9]||(s[9]=e("p",{class:"text-sm font-medium text-gray-500"}," Net Cashflow ",-1)),e("p",{class:p(["text-2xl font-semibold",g.value>=0?"text-green-600":"text-red-600"])},o(d(r)(g.value)),3)])])])]),e("div",de,[e("div",ae,[e("div",re,[s[11]||(s[11]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])])],-1)),e("div",ce,[s[10]||(s[10]=e("p",{class:"text-sm font-medium text-gray-500"}," Profit Margin ",-1)),e("p",me,o(B.value.toFixed(1))+"% ",1)])])])])]),e("div",xe,[e("div",ue,[s[12]||(s[12]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Monthly Cashflow Trends ",-1)),e("div",he,[(n(!0),l(u,null,v(c.monthlyTrends,(t,a)=>(n(),l("div",{key:a,class:"flex-1 flex flex-col items-center"},[e("div",ge,[e("div",{class:"w-full bg-green-200 rounded-t",style:y({height:j(t.income,k.value)+"px"}),title:`Income: ${d(r)(t.income)}`},null,12,ve),e("div",{class:"w-full bg-red-200 rounded-b",style:y({height:j(t.expenses,k.value)+"px"}),title:`Expenses: ${d(r)(t.expenses)}`},null,12,fe)]),e("div",pe,o(t.month_name),1)]))),128))]),s[13]||(s[13]=e("div",{class:"flex justify-center space-x-6 mt-4"},[e("div",{class:"flex items-center"},[e("div",{class:"w-4 h-4 bg-green-200 rounded mr-2"}),e("span",{class:"text-sm text-gray-600"},"Income")]),e("div",{class:"flex items-center"},[e("div",{class:"w-4 h-4 bg-red-200 rounded mr-2"}),e("span",{class:"text-sm text-gray-600"},"Expenses")])],-1))])]),e("div",ye,[e("div",_e,[e("div",we,[s[14]||(s[14]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Income by Category ",-1)),Object.keys(c.categoryBreakdown.income).length>0?(n(),l("div",be,[(n(!0),l(u,null,v(c.categoryBreakdown.income,(t,a)=>(n(),l("div",{key:a,class:"flex items-center justify-between"},[e("span",ke,o(C(a)),1),e("div",je,[e("div",Ce,[e("div",{class:"bg-green-500 h-2 rounded-full",style:y({width:w(t,m.value)+"%"})},null,4)]),e("span",Me,o(d(r)(t)),1)])]))),128))])):(n(),l("div",Be," No income data for this period "))])]),e("div",Pe,[e("div",Ae,[s[15]||(s[15]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Expenses by Category ",-1)),Object.keys(c.categoryBreakdown.expenses).length>0?(n(),l("div",Te,[(n(!0),l(u,null,v(c.categoryBreakdown.expenses,(t,a)=>(n(),l("div",{key:a,class:"flex items-center justify-between"},[e("span",Ne,o(C(a)),1),e("div",Ee,[e("div",Ve,[e("div",{class:"bg-red-500 h-2 rounded-full",style:y({width:w(t,f.value)+"%"})},null,4)]),e("span",ze,o(d(r)(t)),1)])]))),128))])):(n(),l("div",Fe," No expense data for this period "))])])]),e("div",Ie,[e("div",Le,[s[16]||(s[16]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Payment Method Analysis ",-1)),e("div",Oe,[(n(!0),l(u,null,v(c.paymentMethodAnalysis,(t,a)=>(n(),l("div",{key:a,class:"border border-gray-200 rounded-lg p-4"},[e("div",Se,[e("span",Ue,o(T(a)),1),e("span",$e,o(t.count)+" transactions",1)]),e("div",De,o(d(r)(t.total)),1),e("div",He,o(w(t.total,P.value))+"% of total ",1)]))),128))])])]),e("div",qe,[e("div",Ge,[s[20]||(s[20]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," 3-Month Cashflow Forecast ",-1)),e("div",Je,[(n(!0),l(u,null,v(c.forecast,(t,a)=>(n(),l("div",{key:a,class:"border border-gray-200 rounded-lg p-4"},[e("div",Ke,o(t.month_name),1),e("div",Qe,[e("div",Re,[s[17]||(s[17]=e("span",{class:"text-gray-600"},"Projected Income:",-1)),e("span",We,o(d(r)(t.projected_income)),1)]),e("div",Xe,[s[18]||(s[18]=e("span",{class:"text-gray-600"},"Projected Expenses:",-1)),e("span",Ye,o(d(r)(t.projected_expenses)),1)]),e("div",Ze,[s[19]||(s[19]=e("span",{class:"font-medium text-gray-900"},"Net Projection:",-1)),e("span",{class:p(["font-medium",t.projected_net>=0?"text-green-600":"text-red-600"])},o(d(r)(t.projected_net)),3)])])]))),128))]),s[21]||(s[21]=e("div",{class:"mt-4 text-xs text-gray-500"}," * Forecast is based on historical averages from the last 6 months ",-1))])])])])]),_:1})],64))}};export{as as default};
