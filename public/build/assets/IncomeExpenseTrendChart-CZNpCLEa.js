import{C as x,p as D,a as _,b as v,c as M,d as k,L as S,B as w}from"./index-ocpBZU4Q.js";import{r as c,l as C,z as E,y as B,b as i,o as u,d as A,u as I,a as N}from"./app-CutGg6Ru.js";const R={class:"p-4 bg-white shadow rounded-lg"},F={key:0,style:{height:"400px"}},L={key:1,class:"text-center text-gray-500 py-10"},Y={__name:"IncomeExpenseTrendChart",props:{transactions:{type:Array,default:()=>[]},currentReferenceDate:{type:String,default:()=>new Date().toISOString().split("T")[0]}},setup(s){x.register(D,_,v,M,k,S);const d=s,b=c(null),l=c({labels:[],datasets:[]});function p(t){return`${["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]} ${t.getFullYear()}`}const h=C(()=>{const t=new Date(d.currentReferenceDate),e={},o=[];for(let a=5;a>=0;a--){const n=new Date(t);n.setMonth(t.getMonth()-a),n.setDate(1);const r=p(n);o.push(r),e[r]={income:0,expense:0}}(d.transactions||[]).forEach(a=>{if(!a.transaction_date||!a.amount)return;const n=new Date(a.transaction_date),r=p(n);if(e.hasOwnProperty(r)){const m=parseFloat(a.amount);a.type==="income"?e[r].income+=m:e[r].expense+=m}});const g=o.map(a=>{var n;return Math.round(((n=e[a])==null?void 0:n.income)||0)}),y=o.map(a=>{var n;return Math.round(((n=e[a])==null?void 0:n.expense)||0)});return{labels:o,datasets:[{label:"Income",backgroundColor:"rgba(75, 192, 192, 0.5)",borderColor:"rgb(75, 192, 192)",borderWidth:1,data:g},{label:"Expenses",backgroundColor:"rgba(255, 99, 132, 0.5)",borderColor:"rgb(255, 99, 132)",borderWidth:1,data:y}]}}),f=c({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Income vs Expenses (Last 6 Months)",font:{size:16}},tooltip:{callbacks:{label:function(t){let e=t.dataset.label||"";return e&&(e+=": "),t.parsed.y!==null&&(e+=new Intl.NumberFormat("en-US",{style:"currency",currency:"KES"}).format(t.parsed.y)),e}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(t){return"KES "+t.toLocaleString()}}},x:{title:{display:!0,text:"Month"}}}});return E(h,t=>{l.value=t},{deep:!0}),B(()=>{l.value=h.value}),(t,e)=>(u(),i("div",R,[s.transactions&&s.transactions.length>0?(u(),i("div",F,[A(I(w),{data:l.value,options:f.value,ref_key:"chartRef",ref:b},null,8,["data","options"])])):(u(),i("div",L,e[0]||(e[0]=[N("p",null,"No transaction data available to display the trend.",-1)])))]))}};export{Y as _};
