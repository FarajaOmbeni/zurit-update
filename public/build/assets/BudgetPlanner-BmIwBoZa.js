import{r as v,C as W,l as x,z as he,y as ke,b as i,o as r,d as B,u as n,m as Se,w as re,a as e,f as p,j as u,c as Ce,t as a,Q as y,n as A,F as g,i as w,g as X,k as j,v as _,p as $}from"./app-DGfwjXf9.js";import{A as Ee}from"./AuthenticatedLayout-BXzRjq0W.js";import{_ as Ie}from"./Sidebar-vJ_UHKIw.js";import{_ as De}from"./DashboardBackButton-C4BdXy7y.js";import{_ as ie}from"./BudgetBarChart-CV8QgtuK.js";import{_ as Me}from"./Alert-hzAG2lao.js";import{u as Ae}from"./useAlert-DMkjs50D.js";import{f as je}from"./useDateFormat-pjOuPPEs.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                */import"./EllipsisHorizontalIcon-DWKr89UL.js";import"./AcademicCapIcon-B-SjTG6M.js";import"./UserIcon-IwXNF16E.js";import"./HomeIcon-C5GcRUPv.js";import"./useFormatCurrency-DPZVhC5N.js";const ae=[{value:"rent",label:"Rent"},{value:"utilities",label:"Utilities"},{value:"groceries",label:"Groceries"},{value:"eatout",label:"Eating out"},{value:"transportation",label:"Transportation"},{value:"fuel",label:"Fuel"},{value:"insurance",label:"Insurance"},{value:"investment",label:"Investment Contribution"},{value:"debt",label:"Debt Payment"},{value:"goal",label:"Goal Contribution"},{value:"other",label:"Other"}],de=[{value:"salary",label:"Salary"},{value:"freelance",label:"Freelance"},{value:"business_income",label:"Business Income"},{value:"rental_income",label:"Rental Income"},{value:"investments",label:"Investments"},{value:"side_hustle",label:"Side Hustle"},{value:"bonus",label:"Bonus"},{value:"other",label:"Other"}],Te={class:"w-full text-gray-900"},Ve={class:"py-6"},Oe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ue={class:"flex justify-between"},Be={class:"flex items-center justify-between mb-4 gap-2"},$e={class:"text-2xl font-semibold text-gray-900"},Le={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ne={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},qe={class:"px-6"},Fe={key:1,class:"mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4"},Ke={class:"mt-1 text-3xl font-semibold text-green-600"},Ye={class:"mt-1 text-3xl font-semibold text-red-500"},ze={class:"bg-white overflow-hidden shadow rounded-lg"},Re={class:"px-4 py-5 sm:p-6 flex flex-col space-y-2"},Pe={key:2,class:"mt-6 text-center"},Ge={class:"mt-4 flex justify-center space-x-2"},Je={class:"my-4 w-full flex justify-center"},He=["href"],Qe={key:3,class:"mt-8 grid grid-cols-1 gap-8 lg:grid-cols-2"},We={class:"mt-12"},Xe={class:"text-xl font-bold text-gray-900 text-center"},Ze={class:"mt-4 bg-white shadow rounded-lg"},et={class:"divide-y divide-gray-200"},tt={class:"flex items-center justify-between"},ot={class:"text-sm font-medium text-gray-900"},st={class:"flex flex-col gap-2 md:flex-row md:gap-0 text-sm items-center space-x-2"},nt={class:"text-green-600 font-medium"},lt=["onClick"],rt=["onClick"],it={class:"px-4 py-3 bg-gray-50"},at={class:"flex items-center justify-between"},dt={class:"text-sm font-bold text-green-600"},ut={class:"mt-12"},ct={class:"text-xl font-bold text-gray-900 text-center"},mt={class:"mt-4 bg-white shadow rounded-lg"},bt={class:"divide-y divide-gray-200"},pt={class:"flex items-center justify-between"},gt={class:"text-sm font-medium text-gray-900"},ft={class:"flex flex-col gap-2 md:flex-row md:gap-0 text-sm items-center space-x-2"},vt={class:"text-red-600 font-medium"},xt={class:"px-4 py-3 bg-gray-50"},yt={class:"flex items-center justify-between"},wt={class:"text-sm font-bold text-red-600"},_t={class:"mt-12"},ht={class:"mt-4 bg-white shadow rounded-lg"},kt={class:"divide-y divide-gray-200"},St={key:0,class:"px-4 py-6 text-center text-gray-500"},Ct={class:"flex items-center justify-between"},Et={class:"text-sm font-medium text-gray-900"},It={class:"text-sm text-gray-500"},Dt={class:"flex flex-col gap-2 md:flex-row md:gap-0 text-sm items-center space-x-2"},Mt=["onClick"],At=["onClick"],jt={class:"px-4 py-3 bg-gray-50 border-t border-gray-200"},Tt={class:"flex justify-between items-center"},Vt={class:"text-sm font-medium text-gray-700"},Ot={class:"text-right"},Ut={class:"text-sm font-medium text-green-600"},Bt={class:"text-sm font-medium text-red-600"},$t={key:0,class:"fixed inset-0 overflow-y-auto z-10 flex items-center justify-center"},Lt={class:"relative bg-white rounded-lg max-w-sm w-full mx-2 p-4 shadow-lg"},Nt={class:"mb-3"},qt=["value"],Ft={class:"mb-3"},Kt=["required"],Yt={class:"mb-3"},zt={class:"flex space-x-4"},Rt={class:"flex items-center text-sm"},Pt={class:"flex items-center text-sm"},Gt={class:"mb-3"},Jt={class:"mb-3"},Ht={class:"mb-4"},Qt={class:"flex justify-end space-x-2"},Wt=["disabled"],Xt={key:1,class:"fixed inset-0 overflow-y-auto z-10 flex items-center justify-center"},Zt={class:"relative bg-white rounded-lg max-w-sm w-full mx-2 p-4 shadow-lg"},eo={class:"mb-3"},to=["value"],oo={class:"mb-3"},so=["required"],no={class:"mb-3"},lo={class:"flex space-x-4"},ro={class:"flex items-center text-sm"},io={class:"flex items-center text-sm"},ao={class:"mb-4"},uo=["value"],co=["value"],mo=["value"],bo={class:"mb-3"},po={class:"mb-3"},go={class:"mb-4"},fo={class:"flex justify-end space-x-2"},vo={type:"submit",class:"px-3 py-1.5 border border-transparent rounded-md shadow-sm text-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},xo={key:2,class:"fixed mr-16 sm:mr-0 inset-0 flex items-center justify-center bg-black bg-opacity-50"},yo={class:"bg-white rounded-lg shadow-lg p-4 sm:p-6 w-full max-w-xs sm:max-w-sm md:max-w-md"},wo={class:"mb-4"},_o=["value"],ho=["value"],ko=["value"],So=["value"],Co={class:"mb-3"},Eo={class:"flex space-x-4"},Io={class:"flex items-center text-sm"},Do={class:"flex items-center text-sm"},Mo={class:"mb-4"},Ao={class:"mb-4"},jo={class:"mb-4"},To={class:"flex justify-end space-x-2"},Vo={type:"submit",class:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded"},Oo={key:3,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},Uo={class:"bg-white rounded-lg shadow-lg p-4 sm:p-6 w-full max-w-xs sm:max-w-sm md:max-w-md"},Bo={class:"flex justify-end space-x-2"},$o={key:4,class:"fixed inset-0 overflow-y-auto z-10 flex items-center justify-center"},Lo={class:"relative bg-purple-900 text-white rounded-lg max-w-md w-full mx-4 p-4 shadow-xl border-2 border-yellow-500"},No={class:"space-y-2"},qo={class:"flex justify-between items-center"},Fo={class:"text-xs font-medium text-white"},Ko={class:"text-xs font-semibold text-yellow-500"},Yo={class:"bg-purple-900 border border-yellow-500 rounded-lg p-2 mt-2"},zo={class:"flex justify-between items-center"},Ro={class:"text-sm font-semibold text-yellow-500"},Po={class:"mt-3 flex justify-end space-x-2"},as={__name:"BudgetPlanner",props:{data:Object,today:String},setup(Z){const{alertState:L,openAlert:f,clearAlert:ue}=Ae(),S=Z,N=v([]),q=v(!1),F=v(!1),c=v(null),h=W({category:"",description:"",amount:"",transaction_date:"",is_recurring:!1}),C=v(null),R=v([]),K=x(()=>C.value?N.value.filter(s=>{const t=new Date(s.transaction_date);return ne(t)===C.value}):N.value),P=x(()=>K.value.filter(s=>s.type==="income")),Y=x(()=>K.value.filter(s=>s.type!=="income")),T=x(()=>P.value.reduce((s,t)=>s+parseFloat(t.amount),0)),E=x(()=>Y.value.reduce((s,t)=>s+parseFloat(t.amount),0)),V=x(()=>T.value-E.value),I=x(()=>N.value.length>0),ce=x(()=>{const t=P.value.reduce((o,d)=>{const b=d.category;return o[b]||(o[b]={totalAmount:0}),o[b].totalAmount+=parseFloat(d.amount),o},{});return Object.entries(t).map(([o,{totalAmount:d}])=>({label:o,amount:Math.round(d)})).sort((o,d)=>d.amount-o.amount).slice(0,3)}),me=x(()=>{const t=Y.value.reduce((d,b)=>{const M=b.category;return d[M]||(d[M]=[]),d[M].push(b),d},{});return Object.entries(t).map(([d,b])=>({category:d,totalAmount:b.reduce((M,Q)=>M+parseFloat(Q.amount),0),expenses:b})).sort((d,b)=>b.totalAmount-d.totalAmount).slice(0,3).map(d=>({label:d.category,amount:Math.round(d.totalAmount),expenses:d.expenses}))}),ee=x(()=>Y.value?Y.value.reduce((s,t)=>{const o=t.category;return s[o]||(s[o]=0),s[o]+=parseFloat(t.amount),s},{}):{}),O=async()=>{try{N.value=S.data.transactions||[],we()}catch(s){console.error("Error fetching or initializing data:",s),f("danger","Failed to load data.",5e3)}},te=s=>{c.value={...s,transaction_date:s.transaction_date?new Date(s.transaction_date).toISOString().split("T")[0]:""},q.value=!0},oe=s=>{c.value=s,F.value=!0},be=()=>{const s=c.value;h.category=s.category,h.description=s.description,h.amount=s.amount,h.is_recurring=s.is_recurring,h.transaction_date=s.transaction_date;const t=s.type==="income"?"income.edit":"expense.edit";h.put(route(t,s.id),{onSuccess:()=>{q.value=!1,f("success","Transaction Updated Successfully",5e3),O()},onError:o=>{f("danger",Object.values(o).flat().join(" "),5e3),console.error("Error editing transaction:",o)}})},se=()=>{const s=c.value,t=s.type==="income"?"income.destroy":"expense.destroy";h.delete(route(t,s.id),{onSuccess:()=>{f("warning","Transaction Deleted Successfully",5e3),F.value=!1,O()},onError:o=>{f("danger","Error Deleting Transaction",5e3),console.error("Error deleting transaction:",o)}})},U=v(!1),D=v(!1),z=v(!1),G=x(()=>l.category==="debt"||l.category==="investment"||l.category==="goal"),m=W({category:"",otherCategory:"",amount:"",description:"",income_date:"",is_recurring:!0}),l=W({category:"",otherCategory:"",amount:"",description:"",expense_date:"",is_recurring:!0});he(()=>[l.category,l.debtId,l.goalId,l.investmentId],()=>{if(l.category==="debt"){const s=S.data.debts.find(t=>t.id==l.debtId);l.description=s?s.description:""}else if(l.category==="goal"){const s=S.data.goals.find(t=>t.id==l.goalId);l.description=s?s.description:""}else if(l.category==="investment"){const s=S.data.investments.find(t=>t.id==l.investmentId);l.description=s?s.details_of_investment:""}else l.description=""},{immediate:!0});const pe=()=>{m.post(route("income.store"),{onSuccess:()=>{U.value=!1,m.reset(),f("success","Income added successfully",5e3),O()},onError:s=>{const t=Object.values(s).flat().join(" ");f("danger",t,5e3)}})},ge=()=>{l.category==="debt"?ve():l.category==="investment"?xe():l.category==="goal"?ye():fe()},fe=()=>{l.post(route("expense.store"),{onSuccess:()=>{D.value=!1,l.reset(),f("success","Expense added successfully",5e3),O()},onError:s=>{const t=Object.values(s).flat().join(" ");f("danger",t,5e3)}})},J=()=>{D.value=!1,l.reset(),f("success","Contribution Made Successfully.",5e3),O()},H=s=>{const t=Object.values(s).flat().join(" ");f("danger",t,5e3)},ve=()=>{l.put(route("debt.contribute",l.debtId),{onSuccess:J,onError:H})},xe=()=>{l.put(route("invest.contribute",l.investmentId),{onSuccess:J,onError:H})},ye=()=>{l.put(route("goal.contribute",l.goalId),{onSuccess:J,onError:H})};function we(){const s={};N.value.forEach(t=>{const o=new Date(t.transaction_date),d=ne(o);s[d]=!0}),R.value=Object.keys(s).sort((t,o)=>{const[d,b]=t.split(" "),[M,Q]=o.split(" ");return Q-b||le(M)-le(d)}),R.value.length>0?_e(R.value[0]):(C.value=new Date().toLocaleString("en-US",{month:"long",year:"numeric"}),T.value=0,E.value=0,V.value=0)}function ne(s){return`${["January","February","March","April","May","June","July","August","September","October","November","December"][s.getMonth()]} ${s.getFullYear()}`}function le(s){return["January","February","March","April","May","June","July","August","September","October","November","December"].indexOf(s.split(" ")[0])}function _e(s){C.value=s}ke(()=>{O()}),V.value=T.value-E.value;const k=v(!1);return v(!0),(s,t)=>(r(),i(g,null,[B(n(Se),{title:"Budget Planner"}),B(Ee,null,{default:re(()=>[e("div",Te,[B(Ie,null,{default:re(()=>[B(De),e("div",Ve,[e("div",Oe,[u(e("div",Ue,[e("div",Be,[e("h1",$e,a(Z.today)+"'s Budget ",1),e("button",{onClick:t[0]||(t[0]=o=>k.value=!k.value),class:"text-gray-600 hover:text-gray-800"},[k.value?(r(),i("svg",Ne,t[39]||(t[39]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:`M13.875 18.825A10.05 10.05 0 0112 19
           c-4.477 0-8.268-2.943-9.542-7
           a9.956 9.956 0 012.442-3.993`},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6.1 6.1l11.8 11.8"},null,-1)]))):(r(),i("svg",Le,t[38]||(t[38]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:`M2.458 12C3.732 7.943 7.523 5 12 5
           c4.477 0 8.268 2.943 9.542 7
           -1.274 4.057-5.065 7-9.542 7
           -4.477 0-8.268-2.943-9.542-7z`},null,-1)])))])]),e("div",qe,[e("button",{onClick:t[1]||(t[1]=o=>z.value=!0),class:"w-full py-2 px-4 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-md transition duration-150"}," View Budget ")])],512),[[y,I.value]]),n(L)?(r(),Ce(Me,{key:0,type:n(L).type,message:n(L).message,duration:n(L).duration,"auto-close":n(L).autoClose,onClose:n(ue)},null,8,["type","message","duration","auto-close","onClose"])):p("",!0),I.value?(r(),i("div",Fe,[e("dd",Ke,[e("span",{class:A({"blur-md":!k.value})}," KES "+a(T.value.toLocaleString()),3)]),e("dd",Ye,[e("span",{class:A({"blur-md":!k.value})}," KES "+a(E.value.toLocaleString()),3)]),e("dd",{class:A(["mt-1 text-3xl font-semibold",V.value>=0?"text-green-600":"text-red-600"])},[e("span",{class:A({"blur-md":!k.value})}," KES "+a(V.value.toLocaleString()),3)],2),e("div",ze,[e("div",Re,[e("button",{onClick:t[2]||(t[2]=o=>U.value=!0),class:"w-full py-2 px-4 bg-green-600 hover:bg-green-700 text-white font-medium rounded-md transition duration-150"}," Add Income "),e("button",{onClick:t[3]||(t[3]=o=>D.value=!0),class:"w-full py-2 px-4 bg-red-600 hover:bg-red-700 text-white font-medium rounded-md transition duration-150"}," Add Expense ")])])])):p("",!0),I.value?p("",!0):(r(),i("div",Pe,[t[40]||(t[40]=e("p",{class:"text-lg text-gray-600"},"You have no data available for this month.",-1)),e("div",Ge,[e("button",{onClick:t[4]||(t[4]=o=>U.value=!0),class:"py-2 px-4 bg-green-600 hover:bg-green-700 text-white font-medium rounded-md transition duration-150"}," Add Income "),e("button",{onClick:t[5]||(t[5]=o=>D.value=!0),class:"py-2 px-4 bg-red-600 hover:bg-red-700 text-white font-medium rounded-md transition duration-150"}," Add Expense ")])])),e("div",Je,[e("a",{target:"_blank",href:s.route("budget.budgets"),class:"bg-purple-500 px-4 py-2 rounded-md text-white hover:bg-purple-600"},"View Previous Budgets",8,He)]),I.value?(r(),i("div",Qe,[B(ie,{title:"Top Income Sources",items:ce.value,type:"income",class:"bg-white shadow rounded-lg",showBalances:k.value},null,8,["items","showBalances"]),B(ie,{title:"Top Expenses",items:me.value,type:"expense",class:"bg-white shadow rounded-lg",showBalances:k.value},null,8,["items","showBalances"])])):p("",!0),u(e("div",We,[e("h2",Xe,"Your Income - "+a(C.value),1),e("div",Ze,[e("ul",et,[(r(!0),i(g,null,w(P.value,o=>(r(),i("li",{key:o.id,class:"px-4 py-3"},[e("div",tt,[e("div",null,[e("p",ot,a(o.category)+" - "+a(o.description),1)]),e("div",st,[e("div",nt," + KES "+a(Math.round(parseFloat(o.amount)).toLocaleString()),1),e("button",{onClick:d=>te(o),class:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded"}," Edit ",8,lt),e("button",{onClick:d=>oe(o),class:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded"}," Delete ",8,rt)])])]))),128)),e("li",it,[e("div",at,[t[41]||(t[41]=e("div",null,[e("p",{class:"text-sm font-bold text-gray-900"}," TOTAL INCOME ")],-1)),e("div",dt," KES "+a(T.value.toLocaleString()),1)])])])])],512),[[y,I.value]]),u(e("div",ut,[e("h2",ct,"Your Budget - "+a(C.value),1),e("div",mt,[e("ul",bt,[(r(!0),i(g,null,w(ee.value,(o,d)=>(r(),i("li",{key:d,class:"px-4 py-3"},[e("div",pt,[e("div",null,[e("p",gt,a(d),1)]),e("div",ft,[e("div",vt," - KES "+a(Math.round(parseFloat(o)).toLocaleString()),1)])])]))),128)),e("li",xt,[e("div",yt,[t[42]||(t[42]=e("div",null,[e("p",{class:"text-sm font-bold text-gray-900"}," TOTAL MONTHLY BUDGET ")],-1)),e("div",wt," KES "+a(E.value.toLocaleString()),1)])])])])],512),[[y,I.value]]),u(e("div",_t,[t[43]||(t[43]=e("h2",{class:"text-xl font-bold text-center text-gray-900"},"All Transactions",-1)),e("div",ht,[e("ul",kt,[K.value.length===0?(r(),i("li",St," No transactions right now. Add the first transaction. ")):p("",!0),(r(!0),i(g,null,w(K.value,o=>(r(),i("li",{key:o.id,class:"px-4 py-3"},[e("div",Ct,[e("div",null,[e("p",Et,a(o.description),1),e("p",It,a(n(je)(o.transaction_date)),1)]),e("div",Dt,[e("div",{class:A([o.type==="income"?"text-green-600":"text-red-600","font-medium"])},a(o.type==="income"?"+":"-")+" KES "+a(Math.round(o.amount).toLocaleString()),3),e("button",{onClick:d=>te(o),class:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded"}," Edit ",8,Mt),e("button",{onClick:d=>oe(o),class:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded"}," Delete ",8,At)])])]))),128))]),e("div",jt,[e("div",Tt,[e("span",Vt,a(C.value)+" Summary:",1),e("div",Ot,[e("p",Ut,"Income: KES "+a(T.value.toLocaleString()),1),e("p",Bt,"Expenses: KES "+a(E.value.toLocaleString()),1),e("p",{class:A(["text-sm font-bold",V.value>=0?"text-green-600":"text-red-600"])}," Balance: KES "+a(V.value.toLocaleString()),3)])])])])],512),[[y,I.value]])])]),U.value?(r(),i("div",$t,[e("div",{class:"fixed inset-0 bg-black bg-opacity-50",onClick:t[6]||(t[6]=o=>U.value=!1)}),e("div",Lt,[t[53]||(t[53]=e("h3",{class:"text-base font-semibold text-gray-900 mb-3"},"Add Income",-1)),e("form",{onSubmit:X(pe,["prevent"])},[e("div",Nt,[t[45]||(t[45]=e("label",{for:"incomeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Income Type",-1)),u(e("select",{id:"incomeCategory","onUpdate:modelValue":t[7]||(t[7]=o=>n(m).category=o),class:"w-full px-2 py-1.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:""},[t[44]||(t[44]=e("option",{value:""},"Select Income Category",-1)),(r(!0),i(g,null,w(n(de),o=>(r(),i("option",{key:o.value,value:o.label},a(o.label),9,qt))),128))],512),[[j,n(m).category]])]),u(e("div",Ft,[t[46]||(t[46]=e("label",{for:"incomeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Specify Income",-1)),u(e("input",{type:"text",id:"incomeCategory","onUpdate:modelValue":t[8]||(t[8]=o=>n(m).otherCategory=o),class:"w-full px-2 py-1.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:n(m).category==="Other"},null,8,Kt),[[_,n(m).otherCategory]])],512),[[y,n(m).category==="Other"]]),e("div",Yt,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Is Recurrent?",-1)),e("div",zt,[e("label",Rt,[u(e("input",{type:"radio",id:"yes",name:"is_recurring",value:!0,"onUpdate:modelValue":t[9]||(t[9]=o=>n(m).is_recurring=o)},null,512),[[$,n(m).is_recurring]]),t[47]||(t[47]=e("span",{class:"ml-1"},"Yes",-1))]),e("label",Pt,[u(e("input",{type:"radio",id:"no",name:"is_recurring",value:!1,"onUpdate:modelValue":t[10]||(t[10]=o=>n(m).is_recurring=o)},null,512),[[$,n(m).is_recurring]]),t[48]||(t[48]=e("span",{class:"ml-1"},"No",-1))])])]),e("div",Gt,[t[50]||(t[50]=e("label",{for:"incomeDescription",class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),u(e("textarea",{id:"incomeDescription","onUpdate:modelValue":t[11]||(t[11]=o=>n(m).description=o),class:"w-full px-2 py-1.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[_,n(m).description]])]),e("div",Jt,[t[51]||(t[51]=e("label",{for:"incomeAmount",class:"block text-sm font-medium text-gray-700 mb-1"},"Amount (KES)",-1)),u(e("input",{type:"number",id:"incomeAmount","onUpdate:modelValue":t[12]||(t[12]=o=>n(m).amount=o),class:"w-full px-2 py-1.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01",required:""},null,512),[[_,n(m).amount]])]),e("div",Ht,[t[52]||(t[52]=e("label",{for:"incomeDate",class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),u(e("input",{type:"date",id:"incomeDate","onUpdate:modelValue":t[13]||(t[13]=o=>n(m).income_date=o),class:"w-full px-2 py-1.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[_,n(m).income_date]])]),e("div",Qt,[e("button",{type:"button",onClick:t[14]||(t[14]=o=>U.value=!1),class:"px-3 py-1.5 border border-gray-300 rounded-md shadow-sm text-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),e("button",{type:"submit",disabled:n(m).processing,class:A(["px-3 py-1.5 border border-transparent rounded-md shadow-sm text-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",{"opacity-50 cursor-not-allowed":n(m).processing}])},a(n(m).processing?"Saving...":"Save Income"),11,Wt)])],32)])])):p("",!0),D.value?(r(),i("div",Xt,[e("div",{class:"fixed inset-0 bg-black bg-opacity-50",onClick:t[15]||(t[15]=o=>D.value=!1)}),e("div",Zt,[t[67]||(t[67]=e("h3",{class:"text-base font-semibold text-gray-900 mb-3"},"Add Expense",-1)),e("form",{onSubmit:X(ge,["prevent"])},[e("div",eo,[t[55]||(t[55]=e("label",{for:"expenseCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Expense Type",-1)),u(e("select",{id:"expenseCategory","onUpdate:modelValue":t[16]||(t[16]=o=>n(l).category=o),class:"w-full px-2 py-1.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:""},[t[54]||(t[54]=e("option",{value:""},"Select Expense Type",-1)),(r(!0),i(g,null,w(n(ae),o=>(r(),i("option",{value:o.value,key:o.value},a(o.label),9,to))),128))],512),[[j,n(l).category]])]),u(e("div",oo,[t[56]||(t[56]=e("label",{for:"otherExpenseCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Specify Expense",-1)),u(e("input",{type:"text",id:"otherExpenseCategory","onUpdate:modelValue":t[17]||(t[17]=o=>n(l).otherCategory=o),class:"w-full px-2 py-1.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:n(l).category==="Other"},null,8,so),[[_,n(l).otherCategory]])],512),[[y,n(l).category==="Other"]]),u(e("div",no,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Is Recurrent?",-1)),e("div",lo,[e("label",ro,[u(e("input",{type:"radio",id:"expenseRecurringYes",name:"is_recurring_expense",value:!0,"onUpdate:modelValue":t[18]||(t[18]=o=>n(l).is_recurring=o)},null,512),[[$,n(l).is_recurring]]),t[57]||(t[57]=e("span",{class:"ml-1"},"Yes",-1))]),e("label",io,[u(e("input",{type:"radio",id:"expenseRecurringNo",name:"is_recurring_expense",value:!1,"onUpdate:modelValue":t[19]||(t[19]=o=>n(l).is_recurring=o)},null,512),[[$,n(l).is_recurring]]),t[58]||(t[58]=e("span",{class:"ml-1"},"No",-1))])])],512),[[y,!G.value]]),u(e("div",ao,[t[63]||(t[63]=e("label",{for:"contributionType",class:"block text-sm font-medium text-gray-700 mb-1"},"Specify the contribution",-1)),n(l).category==="debt"?u((r(),i("select",{key:0,id:"contributionDebt","onUpdate:modelValue":t[20]||(t[20]=o=>n(l).debtId=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:""},[t[60]||(t[60]=e("option",{value:""},"Select Contribution",-1)),(r(!0),i(g,null,w(S.data.debts,o=>(r(),i("option",{key:o.id,value:o.id},a(o.name),9,uo))),128))],512)),[[j,n(l).debtId]]):p("",!0),n(l).category==="goal"?u((r(),i("select",{key:1,id:"contributionGoal","onUpdate:modelValue":t[21]||(t[21]=o=>n(l).goalId=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:""},[t[61]||(t[61]=e("option",{value:""},"Select Contribution",-1)),(r(!0),i(g,null,w(S.data.goals,o=>(r(),i("option",{key:o.id,value:o.id},a(o.name),9,co))),128))],512)),[[j,n(l).goalId]]):p("",!0),n(l).category==="investment"?u((r(),i("select",{key:2,id:"contributionInvestment","onUpdate:modelValue":t[22]||(t[22]=o=>n(l).investmentId=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:""},[t[62]||(t[62]=e("option",{value:""},"Select Contribution",-1)),(r(!0),i(g,null,w(S.data.investments,o=>(r(),i("option",{key:o.id,value:o.id},a(o.details_of_investment),9,mo))),128))],512)),[[j,n(l).investmentId]]):p("",!0)],512),[[y,G.value]]),e("div",bo,[t[64]||(t[64]=e("label",{for:"expenseAmount",class:"block text-sm font-medium text-gray-700 mb-1"},"Amount (KES)",-1)),u(e("input",{type:"number",id:"expenseAmount","onUpdate:modelValue":t[23]||(t[23]=o=>n(l).amount=o),class:"w-full px-2 py-1.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01",required:""},null,512),[[_,n(l).amount]])]),e("div",po,[t[65]||(t[65]=e("label",{for:"expenseDescription",class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),u(e("textarea",{id:"expenseDescription","onUpdate:modelValue":t[24]||(t[24]=o=>n(l).description=o),rows:"2",class:"w-full px-2 py-1.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[_,n(l).description]])]),u(e("div",go,[t[66]||(t[66]=e("label",{for:"expenseDate",class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),u(e("input",{type:"date",id:"expenseDate","onUpdate:modelValue":t[25]||(t[25]=o=>n(l).expense_date=o),class:"w-full px-2 py-1.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"},null,512),[[_,n(l).expense_date]])],512),[[y,!G.value]]),e("div",fo,[e("button",{type:"button",onClick:t[26]||(t[26]=o=>D.value=!1),class:"px-3 py-1.5 border border-gray-300 rounded-md shadow-sm text-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),e("button",vo,a(n(l).processing?"Saving...":"Save Expense"),1)])],32)])])):p("",!0),q.value?(r(),i("div",xo,[e("div",yo,[t[75]||(t[75]=e("h3",{class:"text-lg font-bold mb-4"},"Edit Transaction",-1)),e("form",{onSubmit:X(be,["prevent"])},[e("div",wo,[t[68]||(t[68]=e("label",{for:"transactionCategoryEdit",class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),u(e("select",{"onUpdate:modelValue":t[27]||(t[27]=o=>c.value.category=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:""},[e("option",{value:c.value.category},a(c.value.category),9,_o),(r(!0),i(g,null,w(n(ae),o=>(r(),i("option",{key:o.value,value:o.label},a(o.label),9,ho))),128))],512),[[y,c.value.type==="expense"],[j,c.value.category]]),u(e("select",{"onUpdate:modelValue":t[28]||(t[28]=o=>c.value.category=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:""},[e("option",{value:c.value.category},a(c.value.category),9,ko),(r(!0),i(g,null,w(n(de),o=>(r(),i("option",{key:o.value,value:o.label},a(o.label),9,So))),128))],512),[[y,c.value.type==="income"],[j,c.value.category]])]),e("div",Co,[t[71]||(t[71]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Is Recurrent?",-1)),e("div",Eo,[e("label",Io,[u(e("input",{type:"radio",id:"editRecurringYes",name:"edit_is_recurring",value:!0,"onUpdate:modelValue":t[29]||(t[29]=o=>c.value.is_recurring=o)},null,512),[[$,c.value.is_recurring]]),t[69]||(t[69]=e("span",{class:"ml-1"},"Yes",-1))]),e("label",Do,[u(e("input",{type:"radio",id:"editRecurringNo",name:"edit_is_recurring",value:!1,"onUpdate:modelValue":t[30]||(t[30]=o=>c.value.is_recurring=o)},null,512),[[$,c.value.is_recurring]]),t[70]||(t[70]=e("span",{class:"ml-1"},"No",-1))])])]),e("div",Mo,[t[72]||(t[72]=e("label",{for:"editAmount",class:"block text-sm font-medium text-gray-700 mb-1"},"Amount (KES)",-1)),u(e("input",{type:"number",id:"editAmount",name:"amount","onUpdate:modelValue":t[31]||(t[31]=o=>c.value.amount=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01",required:""},null,512),[[_,c.value.amount]])]),e("div",Ao,[t[73]||(t[73]=e("label",{for:"editDescription",class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),u(e("input",{type:"text",id:"editDescription",name:"description","onUpdate:modelValue":t[32]||(t[32]=o=>c.value.description=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[_,c.value.description]])]),e("div",jo,[t[74]||(t[74]=e("label",{for:"editDate",class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),u(e("input",{type:"date",id:"editDate",name:"transaction_date","onUpdate:modelValue":t[33]||(t[33]=o=>c.value.transaction_date=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[_,c.value.transaction_date]])]),e("div",To,[e("button",Vo,a(n(h).processing?"Saving...":"Submit"),1),e("button",{type:"button",onClick:t[34]||(t[34]=o=>q.value=!1),class:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded"},"Cancel")])],32)])])):p("",!0),F.value?(r(),i("div",Oo,[e("div",Uo,[t[76]||(t[76]=e("h3",{class:"text-lg font-bold mb-4"},"Confirm Delete",-1)),t[77]||(t[77]=e("p",{class:"mb-4"},"Are you sure you want to delete this transaction?",-1)),e("div",Bo,[e("button",{type:"button",onClick:se,class:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded"},a(se.processing?"Deleting...":"Delete"),1),e("button",{onClick:t[35]||(t[35]=o=>F.value=!1),class:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded"},"Cancel")])])])):p("",!0),z.value?(r(),i("div",$o,[e("div",{class:"fixed inset-0 bg-black bg-opacity-50",onClick:t[36]||(t[36]=o=>z.value=!1)}),e("div",Lo,[t[79]||(t[79]=e("h3",{class:"text-base font-semibold text-yellow-500 mb-3"},"Monthly Budget Overview",-1)),e("div",No,[(r(!0),i(g,null,w(ee.value,(o,d)=>(r(),i("div",{key:d,class:"bg-purple-900 border border-purple-700 rounded-lg p-2 hover:bg-purple-800 transition-colors"},[e("div",qo,[e("h4",Fo,a(d),1),e("span",Ko," KES "+a(o.toLocaleString()),1)])]))),128))]),e("div",Yo,[e("div",zo,[t[78]||(t[78]=e("h4",{class:"text-sm font-medium text-white"},"TOTAL: ",-1)),e("span",Ro," KES "+a(E.value.toLocaleString()),1)])]),e("div",Po,[e("button",{onClick:t[37]||(t[37]=o=>z.value=!1),class:"px-3 py-1 border border-yellow-500 rounded-md shadow-sm text-xs font-medium text-purple-900 bg-yellow-500 hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-900"}," Close ")])])])):p("",!0)]),_:1})])]),_:1})],64))}};export{as as default};
