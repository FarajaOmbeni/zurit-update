import{k as K,r as h,C as q,b as u,o as i,d as n,u as o,m as J,w as x,a as t,f as m,c as G,n as H,t as d,h as p,g as Q,F as N,i as W,P as L}from"./app-DOrmAwCA.js";import{A as X}from"./AuthenticatedLayout-DQ_Yu1rD.js";import{_ as ee}from"./Sidebar-DJYvRrrS.js";import{_ as te}from"./DashboardBackButton-B_cMD0ic.js";import{_ as se,r as I,a as oe,b as D}from"./LegacyProgress-Ce4h7Qh4.js";import{_ as g}from"./Input-DQdc0-Hu.js";import{_ as ae}from"./Select-DbVkQ2zI.js";import{_ as re}from"./Alert-CUc8cQOE.js";import{u as ne}from"./useAlert-BYj38hxB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                */import"./EllipsisHorizontalIcon-BwMca494.js";import"./AcademicCapIcon-BV4skYQt.js";import"./UserIcon-UIxbSXDP.js";import"./ChartBarIcon-BeKvB5Jd.js";import"./HomeIcon-Ry8BHHh6.js";const ie={class:"w-full text-gray-900"},le={class:"max-w-6xl mx-auto p-6"},ue={class:"flex justify-between items-center mb-8"},de={class:"text-right"},ce={class:"mb-6"},pe={key:1,class:"bg-white rounded-lg shadow-sm border p-6 mb-8"},me={class:"text-lg font-semibold text-gray-900 mb-4"},ve={class:"grid md:grid-cols-2 gap-4"},ye={class:"grid md:grid-cols-3 gap-4"},be={class:"grid md:grid-cols-3 gap-4"},ge={class:"flex space-x-4"},fe=["disabled"],_e={key:2,class:"space-y-4 mb-8"},he={class:"grid gap-4"},xe={class:"flex items-start justify-between"},Ce={class:"flex-1"},ke={class:"text-lg font-semibold text-gray-900"},we={class:"text-sm text-gray-600 mt-1 space-y-0.5"},Se={key:0},Te={key:1},Be={key:2},Ae={key:3},Fe={class:"flex items-center space-x-2 ml-4"},Ve=["onClick"],Ee=["onClick"],Ke={key:3,class:"text-center py-12"},Ne={class:"flex items-center justify-between pt-8 border-t"},Le={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ie={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},De={class:"p-6"},Oe={class:"flex items-center mb-4"},Pe={class:"flex-shrink-0"},$e={class:"mb-6"},je={class:"text-gray-600"},Ue={class:"flex space-x-4"},Re=["disabled"],rt={__name:"Fiduciaries",props:{fiduciaries:{type:Array,default:()=>[]}},setup(O){const C=O,{openAlert:v,clearAlert:P,alertState:b}=ne(),k=[{value:"Co-operative Bank of Kenya",label:"Co-operative Bank of Kenya — Corporate Trustee Services",website:"https://www.co-opbank.co.ke/corporate/corporate-trustee-services/"},{value:"KCB Bank Kenya",label:"KCB Bank Kenya — Trustee Services",website:"https://ke.kcbgroup.com/for-corporates/services/corporate-trustee"},{value:"ICEA LION Corporate Trustee Services",label:"ICEA LION — Corporate Trustee Services",website:"https://icealion.co.ke/wp-content/uploads/2021/04/ICEA-LION-CORPORATE-TRUSTEE-SERVICES.pdf"},{value:"MTC Trust & Corporate Services Limited",label:"MTC Trust & Corporate Services Limited",website:"https://www.meghraj.com/businesses/mtc-trust-kenyan-fiduciary-services/about-us/"},{value:"NCBA Bank Kenya",label:"NCBA Bank Kenya — Corporate Trustee Services",website:"https://licensees.cma.or.ke/licenses/18/"},{value:"Standard Chartered Bank Kenya",label:"Standard Chartered Bank Kenya — Corporate Trustee Services",website:"https://www.cma.or.ke/cma-licenses-three-new-corporate-trustees/"},{value:"Stanbic Bank Kenya",label:"Stanbic Bank Kenya — Corporate Trustee Services",website:"https://licensees.cma.or.ke/licenses/18/"},{value:"Kingsland Court Trustee Services Limited",label:"Kingsland Court Trustee Services Limited",website:"https://kingslandcourt.co.ke/"},{value:"Corporate & Pension Trust Services Ltd (Zamara)",label:"Zamara — Corporate & Pension Trust Services Ltd (C&P)",website:"https://zamaragroup.com/ke/our-solutions/corporate-pension-trustee-services-kenya/"},{value:"Natbank Trustees & Investment Services Ltd (NBK)",label:"Natbank Trustees & Investment Services Ltd (NBK)",website:"https://www.nationalbank.co.ke/home-ntisl"},{value:"__other__",label:"Other (manual entry)"}],$=K(()=>k.map(r=>({value:r.value,label:r.label}))),c=h(!1),f=h(!1),l=h(null),y=h(null),s=q({institution_type:"",institution_name:"",contact_name:"",email:"",phone:""});function j(r){if(r==="__other__")return;const e=k.find(_=>_.value===r);e&&(s.institution_name=e.value,s.institution_type||(s.institution_type="Corporate Trustee"))}function w(){l.value=null,s.reset(),c.value=!0}function U(r){l.value=r,s.institution_type=r.institution_type||"",s.institution_name=r.institution_name||"",s.contact_name=r.contact_name||"",s.email=r.email||"",s.phone=r.phone||"",c.value=!0}function S(){l.value=null,s.reset(),c.value=!1}function R(){l.value?s.put(route("legacy.fiduciaries.update",l.value.id),{preserveScroll:!0,onSuccess:()=>{s.reset(),c.value=!1,l.value=null,v("success","Fiduciary updated successfully!",5e3)},onError:r=>{const e=Object.values(r||{}).flat().join(" ");v("danger",e||"Could not update fiduciary.",1e4)}}):s.post(route("legacy.fiduciaries.save"),{preserveScroll:!0,onSuccess:()=>{s.reset(),c.value=!1,v("success","Fiduciary added successfully!",5e3)},onError:r=>{const e=Object.values(r||{}).flat().join(" ");v("danger",e||"Could not add fiduciary.",1e4)}})}function M(r){y.value=r,f.value=!0}function z(){y.value&&s.delete(route("legacy.fiduciaries.destroy",y.value.id),{preserveScroll:!0,onSuccess:()=>{f.value=!1,y.value=null,v("success","Fiduciary deleted successfully!",5e3)},onError:r=>{const e=Object.values(r||{}).flat().join(" ");v("danger",e||"Could not delete fiduciary.",1e4)}})}function Y(){f.value=!1,y.value=null}const T=K(()=>C.fiduciaries.length);return(r,e)=>(i(),u(N,null,[n(o(J),{title:"Fiduciaries - Legacy & Estate Planning"}),n(X,null,{default:x(()=>{var _;return[t("div",ie,[n(ee,null,{default:x(()=>{var B,A,F,V,E;return[n(te),t("div",le,[o(b)?(i(),G(re,{key:0,type:o(b).type,message:o(b).message,duration:o(b).duration,"auto-close":o(b).autoClose,onClose:o(P)},null,8,["type","message","duration","auto-close","onClose"])):m("",!0),t("div",ue,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Step 3: Fiduciaries (Companies)"),t("p",{class:"text-gray-600"},"Add corporate trustee / fiduciary companies relevant to your estate plan.")],-1)),t("div",de,[e[7]||(e[7]=t("div",{class:"text-sm text-gray-500 mb-1"},"Companies Added",-1)),t("div",{class:H(["text-2xl font-bold",T.value?"text-purple-600":"text-gray-400"])},d(T.value),3)])]),n(se,{current:3}),t("div",ce,[t("button",{onClick:e[0]||(e[0]=a=>c.value?l.value?S():c.value=!1:w()),class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center transition-colors duration-200"},[n(o(I),{class:"w-5 h-5 mr-2"}),p(" "+d(c.value?"Cancel":"Add Fiduciary Company"),1)])]),c.value?(i(),u("div",pe,[t("h3",me,d(l.value?"Edit Fiduciary":"Add New Fiduciary"),1),t("form",{onSubmit:Q(R,["prevent"]),class:"space-y-4"},[t("div",ve,[n(ae,{label:"Pick from Kenya directory (or choose 'Other')",options:$.value,"onUpdate:modelValue":j},null,8,["options"]),n(g,{modelValue:o(s).institution_name,"onUpdate:modelValue":e[1]||(e[1]=a=>o(s).institution_name=a),label:"Institution Name",placeholder:"e.g., Co-operative Bank of Kenya",error:(B=o(s).errors)==null?void 0:B.institution_name,required:""},null,8,["modelValue","error"])]),t("div",ye,[n(g,{modelValue:o(s).institution_type,"onUpdate:modelValue":e[2]||(e[2]=a=>o(s).institution_type=a),label:"Institution Type (optional)",placeholder:"e.g., Corporate Trustee",error:(A=o(s).errors)==null?void 0:A.institution_type},null,8,["modelValue","error"]),n(g,{modelValue:o(s).contact_name,"onUpdate:modelValue":e[3]||(e[3]=a=>o(s).contact_name=a),label:"Contact Person (optional)",placeholder:"e.g., Jane Doe",error:(F=o(s).errors)==null?void 0:F.contact_name},null,8,["modelValue","error"]),n(g,{modelValue:o(s).email,"onUpdate:modelValue":e[4]||(e[4]=a=>o(s).email=a),label:"Email (optional)",placeholder:"name@company.co.ke",error:(V=o(s).errors)==null?void 0:V.email},null,8,["modelValue","error"])]),t("div",be,[n(g,{modelValue:o(s).phone,"onUpdate:modelValue":e[5]||(e[5]=a=>o(s).phone=a),label:"Phone (optional)",placeholder:"+254 ...",error:(E=o(s).errors)==null?void 0:E.phone},null,8,["modelValue","error"])]),t("div",ge,[t("button",{type:"submit",disabled:o(s).processing,class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center transition-colors duration-200"},d(o(s).processing?l.value?"Updating...":"Adding...":l.value?"Update Fiduciary":"Add Fiduciary"),9,fe),t("button",{type:"button",onClick:e[6]||(e[6]=a=>l.value?S():c.value=!1),class:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg flex items-center transition-colors duration-200"}," Cancel ")])],32)])):m("",!0),C.fiduciaries.length?(i(),u("div",_e,[e[13]||(e[13]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Your Fiduciary Companies",-1)),t("div",he,[(i(!0),u(N,null,W(C.fiduciaries,a=>(i(),u("div",{key:a.id,class:"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow"},[t("div",xe,[t("div",Ce,[t("h4",ke,d(a.institution_name),1),t("div",we,[a.institution_type?(i(),u("div",Se,[e[9]||(e[9]=t("span",{class:"font-medium"},"Type:",-1)),p(" "+d(a.institution_type),1)])):m("",!0),a.contact_name?(i(),u("div",Te,[e[10]||(e[10]=t("span",{class:"font-medium"},"Contact:",-1)),p(" "+d(a.contact_name),1)])):m("",!0),a.email?(i(),u("div",Be,[e[11]||(e[11]=t("span",{class:"font-medium"},"Email:",-1)),p(" "+d(a.email),1)])):m("",!0),a.phone?(i(),u("div",Ae,[e[12]||(e[12]=t("span",{class:"font-medium"},"Phone:",-1)),p(" "+d(a.phone),1)])):m("",!0)])]),t("div",Fe,[t("button",{onClick:Z=>U(a),class:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors duration-200",title:"Edit"},[n(o(oe),{class:"w-5 h-5"})],8,Ve),t("button",{onClick:Z=>M(a),class:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",title:"Delete"},[n(o(D),{class:"w-5 h-5"})],8,Ee)])])]))),128))])])):(i(),u("div",Ke,[e[15]||(e[15]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No fiduciary companies added yet",-1)),e[16]||(e[16]=t("p",{class:"text-gray-600 mb-6"},"Add at least one company to proceed.",-1)),t("button",{onClick:w,class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center transition-colors duration-200"},[n(o(I),{class:"w-5 h-5 mr-2"}),e[14]||(e[14]=p(" Add Your First Company "))])])),t("div",Ne,[n(o(L),{href:r.route("legacy.beneficiaries"),class:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200"},{default:x(()=>e[17]||(e[17]=[p(" ← Back to Beneficiaries ")])),_:1},8,["href"]),n(o(L),{href:r.route("legacy.insurance"),class:"bg-purple-50 hover:bg-purple-100 text-purple-700 font-semibold py-2 px-4 rounded-lg transition-colors duration-200"},{default:x(()=>e[18]||(e[18]=[p(" Continue to Insurance → ")])),_:1},8,["href"])])])]}),_:1})]),f.value?(i(),u("div",Le,[t("div",Ie,[t("div",De,[t("div",Oe,[t("div",Pe,[n(o(D),{class:"w-6 h-6 text-red-600"})]),e[19]||(e[19]=t("div",{class:"ml-3"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Delete Fiduciary")],-1))]),t("div",$e,[t("p",je,[e[20]||(e[20]=p(" Are you sure you want to delete ")),t("strong",null,d((_=y.value)==null?void 0:_.institution_name),1),e[21]||(e[21]=p("? This action cannot be undone. "))])]),t("div",Ue,[t("button",{onClick:z,disabled:o(s).processing,class:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200"},d(o(s).processing?"Deleting...":"Delete"),9,Re),t("button",{onClick:Y,class:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200"}," Cancel ")])])])])):m("",!0)]}),_:1})],64))}};export{rt as default};
