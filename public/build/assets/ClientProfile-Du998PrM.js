import{k as p,b as m,o as i,a as t,F as I,i as J,t as a,u as s,r as D,z,c as T,w as G,d as c,m as W,f as P,n as E,j as Y,l as U}from"./app-C0T2zDcd.js";import{_ as q}from"./CoachSidebar-sQb-cYLx.js";import{_ as H}from"./DashboardBackButton-EoyCgRsl.js";import{_ as Q,a as R,b as X}from"./LiabilitiesTable-4TnFR7gM.js";import{_ as Z}from"./DebtsTable-XvfHoe_V.js";import{_ as tt}from"./IncomeExpenseTrendChart-DEtnQfSQ.js";import{f as et}from"./useDateFormat-pjOuPPEs.js";import{f as C}from"./useFormatCurrency-Dh16EV-S.js";import{_ as st}from"./InvestmentChart-CX3zA_mH.js";import"./CalendarDaysIcon-BzavwpAU.js";import"./HomeIcon-BwvGyObO.js";import"./UserIcon-DSbwyvP2.js";import"./index-B_mfV6Ew.js";const ot={class:"overflow-x-auto"},at={class:"min-w-full bg-white border border-gray-200"},lt={class:"text-gray-700"},nt={class:"px-4 py-2"},rt={class:"px-4 py-2"},it={class:"px-4 py-2 text-right"},dt={class:"bg-gray-100 font-bold"},ct={class:"px-4 py-2 text-right"},ut={__name:"GoalTable",props:{goals:{type:Array,default:()=>[]}},setup(g){const b=g,d=p(()=>b.goals.reduce((h,n)=>h+Number(n.target_amount||0),0));return(h,n)=>(i(),m("div",ot,[t("table",at,[n[2]||(n[2]=t("thead",{class:"bg-purple-500 text-white"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"Goal Name"),t("th",{class:"px-4 py-2 text-left"},"Target Date"),t("th",{class:"px-4 py-2 text-right"},"Target Amount")])],-1)),t("tbody",lt,[(i(!0),m(I,null,J(g.goals,r=>(i(),m("tr",{key:r.id||r.goal_id,class:"border-t"},[t("td",nt,a(r.name),1),t("td",rt,a(s(et)(r.target_date)),1),t("td",it,a(s(C)(r.target_amount)),1)]))),128))]),t("tfoot",dt,[t("tr",null,[n[0]||(n[0]=t("td",{class:"px-4 py-2"},"Totals",-1)),n[1]||(n[1]=t("td",{class:"px-4 py-2"},null,-1)),t("td",ct,a(s(C)(d.value)),1)])])])]))}},mt={class:"space-y-6"},pt={class:"bg-white rounded-lg shadow p-6"},gt={class:"flex items-center justify-between"},_t={class:"text-2xl font-bold text-purple-800"},bt={class:"text-gray-600"},ht={key:0,class:"text-gray-600"},xt={class:"text-right"},ft={class:"bg-white rounded-lg shadow p-6"},vt={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4"},yt={class:"text-xl font-bold text-purple-800"},wt={class:"w-full md:w-64"},$t=["value"],At={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Mt={class:"bg-gray-50 rounded-lg p-4"},St={class:"text-2xl font-semibold text-green-600"},Nt={class:"bg-gray-50 rounded-lg p-4"},kt={class:"text-2xl font-semibold text-red-600"},Bt={class:"bg-gray-50 rounded-lg p-4"},Dt={class:"bg-white rounded-lg shadow p-6"},Tt={class:"bg-white rounded-lg shadow p-6"},Et={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ct={class:"bg-white rounded-lg shadow p-6"},It={key:1,class:"text-gray-500"},Jt={class:"bg-white rounded-lg shadow p-6"},Lt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ot={class:"bg-white rounded-lg shadow p-6"},jt={class:"space-y-6"},Ft={class:"bg-white rounded-lg shadow p-6"},Kt={class:"bg-white rounded-lg shadow p-6"},te={__name:"ClientProfile",props:{client:Object,incomes:Array,expenses:Array,transactions:Array,goals:Array,investments:Array,debts:Array,assetsBasic:Array,liabilitiesBasic:Array,netWorth:Number},setup(g){const b=g,{client:d,incomes:h,expenses:n,transactions:r,goals:x,investments:L,debts:O,assetsBasic:v,liabilitiesBasic:y,netWorth:w}=b,u=D(null),_=D([]);function $(o){return`${["January","February","March","April","May","June","July","August","September","October","November","December"][o.getMonth()]} ${o.getFullYear()}`}function A(o){return["January","February","March","April","May","June","July","August","September","October","November","December"].indexOf(o.split(" ")[0])}function j(){const o={};(r||[]).forEach(e=>{if(!e.transaction_date)return;const l=new Date(e.transaction_date);isNaN(l.getTime())||(o[$(l)]=!0)}),_.value=Object.keys(o).sort((e,l)=>{const[f,F]=e.split(" "),[K,V]=l.split(" ");return parseInt(V)-parseInt(F)||A(K)-A(f)}),_.value.length>0&&M(_.value[0])}function M(o){u.value=o}z(()=>{j()});const S=p(()=>u.value?(r||[]).filter(o=>{const e=new Date(o.transaction_date);return $(e)===u.value}):[]),N=p(()=>S.value.filter(o=>o.type==="income").reduce((o,e)=>o+Number(e.amount||0),0)),k=p(()=>S.value.filter(o=>o.type!=="income").reduce((o,e)=>o+Number(e.amount||0),0)),B=p(()=>N.value-k.value);return(o,e)=>(i(),T(q,{title:`Client: ${s(d).name}`},{default:G(()=>[c(s(W),{title:`${s(d).name} • Profile`},null,8,["title"]),c(H),t("div",mt,[t("div",pt,[t("div",gt,[t("div",null,[t("h2",_t,a(s(d).name),1),t("p",bt,a(s(d).email),1),s(d).phone_number?(i(),m("p",ht,a(s(d).phone_number),1)):P("",!0)]),t("div",xt,[e[2]||(e[2]=t("p",{class:"text-sm text-gray-500"},"Net Worth",-1)),t("p",{class:E([s(w)>=0?"text-green-600":"text-red-600","text-2xl font-semibold"])},"KES "+a(Math.round(s(w)).toLocaleString()),3)])])]),t("div",ft,[t("div",vt,[t("h3",yt,"Budget Overview — "+a(u.value||"N/A"),1),t("div",wt,[e[3]||(e[3]=t("label",{for:"monthSelect",class:"block text-sm font-medium text-gray-700 mb-1"},"Select Month",-1)),Y(t("select",{id:"monthSelect","onUpdate:modelValue":e[0]||(e[0]=l=>u.value=l),onChange:e[1]||(e[1]=l=>M(u.value)),class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm"},[(i(!0),m(I,null,J(_.value,(l,f)=>(i(),m("option",{key:f,value:l},a(l),9,$t))),128))],544),[[U,u.value]])])]),t("div",At,[t("div",Mt,[e[4]||(e[4]=t("div",{class:"text-sm text-gray-500"},"Total Income",-1)),t("div",St,"KES "+a(N.value.toLocaleString()),1)]),t("div",Nt,[e[5]||(e[5]=t("div",{class:"text-sm text-gray-500"},"Total Expenses",-1)),t("div",kt,"KES "+a(k.value.toLocaleString()),1)]),t("div",Bt,[e[6]||(e[6]=t("div",{class:"text-sm text-gray-500"},"Balance",-1)),t("div",{class:E([B.value>=0?"text-green-600":"text-red-600","text-2xl font-semibold"])},"KES "+a(B.value.toLocaleString()),3)])])]),t("div",Dt,[c(Q,{assets:s(v),liabilities:s(y)},null,8,["assets","liabilities"])]),t("div",Tt,[c(tt,{transactions:s(r)},null,8,["transactions"])]),t("div",Et,[t("div",Ct,[e[7]||(e[7]=t("h3",{class:"text-xl font-bold text-purple-800 mb-4"},"Goals",-1)),s(x)&&s(x).length?(i(),T(ut,{key:0,goals:s(x)},null,8,["goals"])):(i(),m("div",It,"No goals yet."))]),t("div",Jt,[e[8]||(e[8]=t("h3",{class:"text-xl font-bold text-purple-800 mb-4"},"Debts",-1)),c(Z,{debts:s(O)},null,8,["debts"])])]),t("div",Lt,[t("div",Ot,[e[9]||(e[9]=t("h3",{class:"text-xl font-bold text-purple-800 mb-4"},"Investments",-1)),c(st,{investments:s(L)},null,8,["investments"])]),t("div",jt,[t("div",Ft,[c(R,{assets:s(v)},null,8,["assets"])]),t("div",Kt,[c(X,{liabilities:s(y)},null,8,["liabilities"])])])])])]),_:1},8,["title"]))}};export{te as default};
