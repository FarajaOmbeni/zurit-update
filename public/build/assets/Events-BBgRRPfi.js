import{r as g,C as c,b as V,o as v,d as n,u as t,m as j,w as p,a as s,c as I,f as L,g as y,h as k,t as _,F as M}from"./app-6ivzR7Y5.js";import{A as R}from"./AuthenticatedLayout-D7jZPtDL.js";import{_ as O}from"./AdminSidebar-BHjDqu3l.js";import{_ as T}from"./AdminTable-CjJhJri9.js";import{_ as u,B as E}from"./Button-ch5yKSyL.js";import{_ as x}from"./Select-DelLI7_X.js";import{_ as F}from"./FileInput-BCmvrVfI.js";import{u as H}from"./useAlert-iJEEAoJh.js";import{_ as q}from"./Alert-B9xNQwEl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./EllipsisHorizontalIcon-D_cob1Q7.js";import"./UserIcon-D8XftgK_.js";const z={class:"w-full text-gray-900"},G={key:1,class:"mb-8"},J={key:2,class:"mb-8"},K={class:"flex gap-4"},se={__name:"Events",props:{events:Array},emits:["edit","delete"],setup(S,{emit:Q}){const{openAlert:d,clearAlert:U,alertState:m}=H(),f=g(!1),b=g(null),l=c({name:"",date:"",image:"",price:"",registration_link:""});function C(o){f.value=!0,b.value=o.id,l.name=o.name,l.date=o.date,l.price=o.price,l.registration_link=o.registration_link,l.image=null}function D(){l.post(route("events.update",b.value),{onSuccess:()=>{const o=r.value.findIndex(e=>e.id===b.value);o>-1&&(r.value[o]={...l}),f.value=!1,l.reset(),d("success","Event updated successfully!",5e3)},onError:o=>{d("danger",Object.values(o).flat().join(" "),5e3)}})}function A(){f.value=!1,l.reset()}function N(o){confirm(`Delete "${o.name}"? This can't be undone.`)&&c({}).delete(route("events.destroy",o.id),{onSuccess:()=>{r.value=r.value.filter(e=>e.id!==o.id),d("success","Event deleted.",4e3)},onError:()=>d("danger","Could not delete the event.",4e3)})}const P=S,r=g([]);r.value=P.events;const i=c({name:"",date:"",image:"",price:"",registration_link:""}),$=g([{key:"name",label:"Name"},{key:"date",label:"Date"},{key:"price",label:"Price"},{key:"registration_link",label:"Registration Link"}]),B=o=>{i.image=o},w=()=>{i.post(route("events.store"),{onSuccess:()=>{i.reset(),d("success","Event added succesfully!",5e3)},onError:o=>{const e=Object.values(o).flat().join(" ");d("danger",e,5e3)}})};return(o,e)=>(v(),V(M,null,[n(t(j),{title:"Dashboard"}),n(R,null,{default:p(()=>[s("div",z,[n(O,null,{default:p(()=>[t(m)?(v(),I(q,{key:0,type:t(m).type,message:t(m).message,duration:t(m).duration,"auto-close":t(m).autoClose,onClose:t(U)},null,8,["type","message","duration","auto-close","onClose"])):L("",!0),e[15]||(e[15]=s("h1",{class:"text-2xl font-bold text-purple-900 mb-8"},"Events Management",-1)),f.value?(v(),V("div",J,[e[13]||(e[13]=s("h1",{class:"text-xl font-bold text-purple-900"},"Edit Event",-1)),s("form",{onSubmit:y(D,["prevent"])},[n(u,{modelValue:t(l).name,"onUpdate:modelValue":e[5]||(e[5]=a=>t(l).name=a),label:"Event Name",id:"name_edit"},null,8,["modelValue"]),n(u,{type:"date",modelValue:t(l).date,"onUpdate:modelValue":e[6]||(e[6]=a=>t(l).date=a),label:"Date",id:"date_edit"},null,8,["modelValue"]),n(x,{modelValue:t(l).price,"onUpdate:modelValue":e[7]||(e[7]=a=>t(l).price=a),select_title:"Free or Paid?",label:"Free or Paid?",options:["Free","Paid"]},null,8,["modelValue"]),n(F,{label:"Event Image (optional)",modelValue:t(l).image,"onUpdate:modelValue":e[8]||(e[8]=a=>t(l).image=a),accept:"image/*",onFileSelected:e[9]||(e[9]=a=>t(l).image=a)},null,8,["modelValue"]),n(u,{modelValue:t(l).registration_link,"onUpdate:modelValue":e[10]||(e[10]=a=>t(l).registration_link=a),label:"Registration Link",id:"link_edit"},null,8,["modelValue"]),s("div",K,[n(E,{type:"submit"},{default:p(()=>[k(_(t(l).processing?"Updatingâ€¦":"Save"),1)]),_:1}),n(E,{type:"button",onClick:A},{default:p(()=>e[12]||(e[12]=[k("Cancel")])),_:1})])],32)])):(v(),V("div",G,[e[11]||(e[11]=s("h1",{class:"text-xl font-bold text-purple-900"},"Add New Event",-1)),s("form",{onSubmit:y(w,["prevent"])},[s("div",null,[n(u,{modelValue:t(i).name,"onUpdate:modelValue":e[0]||(e[0]=a=>t(i).name=a),label:"Event Name",placeholder:"Enter the name of the event",id:"name"},null,8,["modelValue"]),n(u,{type:"date",modelValue:t(i).date,"onUpdate:modelValue":e[1]||(e[1]=a=>t(i).date=a),label:"Date",id:"date"},null,8,["modelValue"]),n(x,{modelValue:t(i).price,"onUpdate:modelValue":e[2]||(e[2]=a=>t(i).price=a),select_title:"Free or Paid?",label:"Free or Paid?",options:[{value:"Free",label:"Free"},{value:"Paid",label:"Paid"}]},null,8,["modelValue"]),n(F,{label:"Event Image",modelValue:t(i).image,"onUpdate:modelValue":e[3]||(e[3]=a=>t(i).image=a),accept:"image/*",onFileSelected:B},null,8,["modelValue"]),n(u,{modelValue:t(i).registration_link,"onUpdate:modelValue":e[4]||(e[4]=a=>t(i).registration_link=a),label:"Registration Link",id:"link"},null,8,["modelValue"]),n(E,{type:"submit"},{default:p(()=>[k(_(t(i).processing?"Saving...":"Submit"),1)]),_:1})])],32)])),s("div",null,[e[14]||(e[14]=s("h1",{class:"text-2xl font-bold text-purple-900"},"All Events",-1)),n(T,{data:r.value,headers:$.value,editable:!0,onEdit:C,onDelete:N},null,8,["data","headers"])])]),_:1})])]),_:1})],64))}};export{se as default};
