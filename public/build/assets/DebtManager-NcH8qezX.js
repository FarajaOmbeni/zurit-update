import{r as $,A as T,p as B,C as Y,b as m,o as u,c as j,f as L,a as e,u as l,n as w,t as c,d as g,j as p,h as C,R as q,k as J,g as V,v as b,l as H,F as S,i as A,m as Q,w as P}from"./app-Beo4ItwT.js";import{A as W}from"./AuthenticatedLayout-ueg2KzGX.js";import{_ as Z}from"./Sidebar-BLYFEQMp.js";import{_ as ee}from"./DashboardBackButton-DXe3P3lP.js";import{f as te}from"./useDateFormat-pjOuPPEs.js";import{u as K}from"./useAlert-BXHLJ6Ln.js";import{_ as G}from"./Alert-D4vUwmIe.js";import{P as se,T as le,X as I}from"./x-BZOI8qHi.js";import{_ as oe}from"./DebtsTable-JU8WzPE3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                */import"./EllipsisHorizontalIcon-CXhkN-_T.js";import"./AcademicCapIcon-BxSvzwyG.js";import"./UserIcon-CImU51LK.js";import"./ChartBarIcon-CkJeh_d0.js";import"./HomeIcon-CdmROl8M.js";const X=[{value:"bank_loan",label:"Bank Loan"},{value:"sacco_loan",label:"Sacco Loan"},{value:"microfinance_loan",label:"Microfinance Loan"},{value:"mobile_loan",label:"Mobile Loan (M-Shwari / Fuliza)"},{value:"chama_loan",label:"Chama Loan"},{value:"credit_card",label:"Credit Card"},{value:"business_capital",label:"Business Capital Loan"},{value:"school_fees_loan",label:"School Fees Loan"},{value:"medical_loan",label:"Medical Loan"},{value:"emergency_loan",label:"Emergency Loan"},{value:"vehicle_loan",label:"Vehicle Loan"},{value:"hustler_fund",label:"Hustler Fund"},{value:"other",label:"Other"}],ae={class:"flex justify-between items-center border-b pb-2 mb-2"},ne={class:"flex items-center space-x-2"},re={class:"mb-2"},ie={class:"mt-1"},de={class:"mt-1"},ue={class:"mt-1"},pe={class:"mt-1"},me={class:"mt-1"},ce={class:"w-full bg-gray-300 rounded-full h-2.5 mt-2"},be={class:"flex justify-between items-center mb-2"},fe={class:"grid grid-cols-2 gap-x-2 gap-y-2"},xe={class:"col-span-1"},ve={class:"col-span-1"},ge=["value"],ye={class:"col-span-1"},_e={class:"col-span-1"},we={class:"col-span-1"},ke={class:"col-span-1"},he={class:"mt-2"},De={class:"mt-3 flex justify-end space-x-2"},Ce=["disabled"],$e={class:"flex justify-between items-center mb-4"},Se={class:"flex justify-end space-x-3"},Me={class:"px-3 py-1.5 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},R={__name:"DebtCard",props:{debt:Object},emits:["update","delete"],setup(U,{emit:k}){const{alertState:y,openAlert:h,clearAlert:z}=K(),x=U,M=k,o=$({...x.debt});T(()=>x.debt,d=>{o.value={...d}},{deep:!0});const F=B(()=>o.value.current_amount===o.value.initial_amount?100:Math.min(100,o.value.current_amount*100/o.value.initial_amount)),v=d=>"KES "+Math.round(d).toLocaleString(),a=$(!1),r=Y({name:"",type:"",description:"",initial_amount:"",interest_rate:"",start_date:"",due_date:""}),D=()=>{r.name=o.value.name,r.type=o.value.type||"",r.description=o.value.description,r.initial_amount=o.value.initial_amount,r.interest_rate=o.value.interest_rate||"",r.start_date=o.value.start_date||"",r.due_date=o.value.due_date,r.commitment=o.value.commitment},O=()=>{a.value=!1};T(a,d=>{d&&D()});const E=()=>{r.put(route("debt.update",o.value.id),{preserveScroll:!0,onSuccess:d=>{var t,i,N;(t=d==null?void 0:d.props)!=null&&t.debt?o.value=d.props.debt:(N=(i=d==null?void 0:d.props)==null?void 0:i.flash)!=null&&N.data?o.value={...o.value,...d.props.flash.data}:Object.assign(o.value,r),a.value=!1,h("success","Debt Updated Successfully",5e3),M("update")},onError:d=>{const t=Object.values(d).flat().join(" ");h("danger",t,5e3)}})},_=$(!1),f=()=>{_.value=!1},s=$(!1),n=()=>{s.value=!0,axios.post(route("debt.destroy",o.value.id)).then(()=>{_.value=!1,h("success","Debt deleted successfully."),M("delete",o.value.id)}).catch(d=>{h("danger","Failed to delete debt. Please try again.",5e3),console.error("Error deleting debt:",d)}).finally(()=>{s.value=!1})};return(d,t)=>(u(),m(S,null,[l(y)?(u(),j(G,{key:0,type:l(y).type,message:l(y).message,duration:l(y).duration,"auto-close":l(y).autoClose,onClose:l(z)},null,8,["type","message","duration","auto-close","onClose"])):L("",!0),e("div",{class:w(["bg-white shadow rounded-lg p-4 border-2 border-purple-500",{"border-green-500":o.value.status==="paid_off","text-green-500":o.value.status==="paid_off"}])},[e("div",ae,[e("h3",{class:w(["text-lg font-semibold text-purple-700",{"text-green-500":o.value.status==="paid_off"}])},c(o.value.name),3),e("div",ne,[e("span",{class:w(["px-2 py-1 text-xs font-bold uppercase rounded-full",{"bg-yellow-400 text-black":o.value.status==="active","bg-green-500 text-gray-100":o.value.status==="paid_off"}])},c(o.value.status),3),e("button",{onClick:t[0]||(t[0]=i=>a.value=!0),class:w(["p-1 text-purple-600 hover:text-purple-800 transition-colors",{hidden:o.value.status==="paid_off"}])},[g(l(se),{class:"h-4 w-4"})],2),e("button",{onClick:t[1]||(t[1]=i=>_.value=!0),class:w(["p-1 text-red-600 hover:text-red-800 transition-colors",{hidden:o.value.status==="paid_off"}])},[g(l(le),{class:"h-4 w-4"})],2)])]),e("div",re,[e("p",{class:w(["text-gray-600",{"text-green-500":o.value.status==="paid_off"}])},c(o.value.description),3),e("p",ie,[t[15]||(t[15]=e("strong",null,"Principal:",-1)),C(" "+c(v(o.value.initial_amount)),1)]),e("p",de,[t[16]||(t[16]=e("strong",null,"Paid:",-1)),C(" "+c(v(o.value.current_amount)),1)]),e("p",ue,[t[17]||(t[17]=e("strong",null,"Due:",-1)),C(" "+c(v(o.value.initial_amount-o.value.current_amount)),1)]),e("p",pe,[t[18]||(t[18]=e("strong",null,"Minimum payment:",-1)),C(" "+c(v(o.value.minimum_payment)),1)]),p(e("p",me,[t[19]||(t[19]=e("strong",null,"Balance:",-1)),C(" "+c(v(o.value.initial_amount-o.value.current_amount)),1)],512),[[q,o.value.status==="in_progress"]]),e("div",ce,[e("div",{class:w([o.value.status==="active"?"bg-yellow-400":"bg-green-500","h-2.5 rounded-full"]),style:J({width:F.value+"%"})},null,6)])]),e("div",{class:w(["text-right text-red-500 font-bold text-sm",{hidden:o.value.status==="paid_off"}])}," Due: "+c(l(te)(o.value.due_date)),3),a.value?(u(),m("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:O},[e("div",{class:"bg-white rounded-lg p-3 w-full max-w-sm mx-4",onClick:t[11]||(t[11]=V(()=>{},["stop"]))},[e("div",be,[t[20]||(t[20]=e("h3",{class:"text-base font-medium text-purple-700"},"Edit Debt",-1)),e("button",{onClick:t[2]||(t[2]=i=>a.value=!1),class:"text-gray-500 hover:text-gray-700"},[g(l(I),{class:"h-4 w-4"})])]),e("form",{onSubmit:V(E,["prevent"])},[e("div",fe,[e("div",xe,[t[21]||(t[21]=e("label",{for:"name",class:"block text-xs font-medium text-gray-700"},"Name",-1)),p(e("input",{type:"text",id:"name","onUpdate:modelValue":t[3]||(t[3]=i=>l(r).name=i),class:"mt-0.5 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 text-xs py-1.5 px-2"},null,512),[[b,l(r).name]])]),e("div",ve,[t[23]||(t[23]=e("label",{for:"type",class:"block text-xs font-medium text-gray-700"},"Type",-1)),p(e("select",{id:"type","onUpdate:modelValue":t[4]||(t[4]=i=>l(r).type=i),class:"mt-0.5 w-full px-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500",required:""},[t[22]||(t[22]=e("option",{value:"",disabled:""},"Select type",-1)),(u(!0),m(S,null,A(l(X),i=>(u(),m("option",{key:i.value,value:i.value},c(i.label),9,ge))),128))],512),[[H,l(r).type]])]),e("div",ye,[t[24]||(t[24]=e("label",{for:"initial_amount",class:"block text-xs font-medium text-gray-700"},"Initial Amount",-1)),p(e("input",{type:"number",id:"initial_amount","onUpdate:modelValue":t[5]||(t[5]=i=>l(r).initial_amount=i),class:"mt-0.5 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 text-xs py-1.5 px-2"},null,512),[[b,l(r).initial_amount]])]),e("div",_e,[t[25]||(t[25]=e("label",{for:"interest_rate",class:"block text-xs font-medium text-gray-700"},"Interest Rate (%)",-1)),p(e("input",{type:"number",id:"interest_rate","onUpdate:modelValue":t[6]||(t[6]=i=>l(r).interest_rate=i),step:"0.01",class:"mt-0.5 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 text-xs py-1.5 px-2"},null,512),[[b,l(r).interest_rate]])]),e("div",we,[t[26]||(t[26]=e("label",{for:"start_date",class:"block text-xs font-medium text-gray-700"},"Start Date",-1)),p(e("input",{type:"date",id:"start_date","onUpdate:modelValue":t[7]||(t[7]=i=>l(r).start_date=i),class:"mt-0.5 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 text-xs py-1.5 px-2"},null,512),[[b,l(r).start_date]])]),e("div",ke,[t[27]||(t[27]=e("label",{for:"due_date",class:"block text-xs font-medium text-gray-700"},"Due Date",-1)),p(e("input",{type:"date",id:"due_date","onUpdate:modelValue":t[8]||(t[8]=i=>l(r).due_date=i),class:"mt-0.5 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 text-xs py-1.5 px-2"},null,512),[[b,l(r).due_date]])])]),e("div",he,[t[28]||(t[28]=e("label",{for:"description",class:"block text-gray-700 text-xs font-medium mb-1"}," Description ",-1)),p(e("textarea",{id:"description","onUpdate:modelValue":t[9]||(t[9]=i=>l(r).description=i),class:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500",rows:"2"},null,512),[[b,l(r).description]])]),e("div",De,[e("button",{type:"button",onClick:t[10]||(t[10]=i=>a.value=!1),class:"px-2 py-1 border border-gray-300 rounded-md shadow-sm text-xs font-medium text-gray-700 bg-white hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:l(r).processing,class:"px-2 py-1 border border-transparent rounded-md shadow-sm text-xs font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-1 focus:ring-purple-500"},c(l(r).processing?"Saving...":"Save Changes"),9,Ce)])],32)])])):L("",!0),_.value?(u(),m("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:f},[e("div",{class:"bg-white rounded-lg p-5 w-full max-w-sm mx-4",onClick:t[14]||(t[14]=V(()=>{},["stop"]))},[e("div",$e,[t[29]||(t[29]=e("h3",{class:"text-lg font-semibold text-red-600"},"Delete Goal",-1)),e("button",{onClick:t[12]||(t[12]=i=>_.value=!1),class:"text-gray-500 hover:text-gray-700"},[g(l(I),{class:"h-5 w-5"})])]),t[30]||(t[30]=e("p",{class:"text-gray-700 mb-4"},"Are you sure you want to delete this goal? This action cannot be undone. ",-1)),e("div",Se,[e("button",{onClick:t[13]||(t[13]=i=>_.value=!1),class:"px-3 py-1.5 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"}," Cancel "),e("form",{onSubmit:V(n,["prevent"])},[e("button",Me,c(s.value?"Deleting...":"Delete"),1)],32)])])])):L("",!0)],2)],64))}},Ve={class:"w-full text-gray-900"},Le={class:"container mx-auto p-4"},je={class:"mb-8"},Ae={key:1,class:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},Ue={key:2,class:"text-gray-600"},Fe={key:0,class:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},Oe={key:1,class:"text-gray-600"},Ee={class:"mt-4"},Be={class:"bg-white rounded-lg shadow-xl w-full max-w-sm mx-4 overflow-hidden"},qe={class:"grid grid-cols-2 gap-x-2 gap-y-2"},ze={class:"col-span-1"},Ne={class:"col-span-1"},Te=["value"],Pe={class:"col-span-1"},Ie={class:"relative"},Re={class:"col-span-1"},Ye={class:"relative"},He={class:"col-span-1"},Ke={class:"col-span-1"},Ge={class:"flex gap-2"},Xe={class:"flex-1"},Je={class:"flex-1"},Qe={class:"mt-2"},We={class:"flex justify-end space-x-2 mt-3"},Ze=["disabled"],xt={__name:"DebtManager",props:{debts:Array,newDebt:Object},setup(U){const{alertState:k,openAlert:y,clearAlert:h}=K(),x=$([...U.debts]),M=B(()=>x.value.filter(f=>f.status==="active")),o=B(()=>x.value.filter(f=>f.status==="paid_off")),F=f=>{x.value=x.value.filter(s=>s.id!==f)},v=$(!1),a=Y({name:"",type:"",description:"",initial_amount:"",interest_rate:"",start_date:"",duration_months:"",duration_years:""}),r=()=>{v.value=!0},D=()=>{v.value=!1,O()},O=()=>{a.reset()},E=()=>{a.post(route("debt.store"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{a.reset(),D(),y("success","Debt added successfully",5e3),window.location.reload()},onError:f=>{const s=Object.values(f).flat().join(" ");y("danger",s,5e3)}})},_=f=>{f.target.classList.contains("modal-overlay")&&D()};return(f,s)=>(u(),m(S,null,[g(l(Q),{title:"Debt Manager"}),g(W,null,{default:P(()=>[e("div",Ve,[g(Z,null,{default:P(()=>[g(ee),e("div",Le,[e("div",{class:"flex justify-between items-center mb-6"},[s[9]||(s[9]=e("h1",{class:"text-2xl font-bold text-purple-700"},"Your Debts",-1)),e("button",{onClick:r,class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center transition-colors duration-200"},s[8]||(s[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),C(" Add Debt ")]))]),e("section",je,[l(k)?(u(),j(G,{key:0,type:l(k).type,message:l(k).message,duration:l(k).duration,"auto-close":l(k).autoClose,onClose:l(h)},null,8,["type","message","duration","auto-close","onClose"])):L("",!0),s[10]||(s[10]=e("h2",{class:"text-xl font-semibold text-purple-700 mb-4"},"Active Debts",-1)),M.value.length?(u(),m("div",Ae,[(u(!0),m(S,null,A(M.value,n=>(u(),j(R,{key:n.id||n.debt_id,debt:n,onDelete:F},null,8,["debt"]))),128))])):(u(),m("div",Ue," No active debts found. "))]),p(e("section",null,[s[11]||(s[11]=e("h2",{class:"text-xl font-bold text-green-700 mb-4"},"Paid Off Debts",-1)),o.value.length?(u(),m("div",Fe,[(u(!0),m(S,null,A(o.value,n=>(u(),j(R,{key:n.id||n.debt_id,debt:n},null,8,["debt"]))),128))])):(u(),m("div",Oe," You have no paid off debts. "))],512),[[q,o.value.length>0]])]),p(e("div",Ee,[s[12]||(s[12]=e("h3",{class:"text-lg font-bold mb-4"},"Debt Full Details",-1)),g(oe,{debts:x.value},null,8,["debts"])],512),[[q,x.value.length>0]])]),_:1})]),v.value?(u(),m("div",{key:0,onClick:_,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 modal-overlay"},[e("div",Be,[e("div",{class:"bg-purple-600 text-white px-3 py-2 flex justify-between items-center"},[s[14]||(s[14]=e("h3",{class:"text-base font-medium"},"Add New Debt",-1)),e("button",{onClick:D,class:"text-white hover:text-gray-200 focus:outline-none"},s[13]||(s[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))]),e("form",{onSubmit:V(E,["prevent"]),class:"p-3"},[e("div",qe,[e("div",ze,[s[15]||(s[15]=e("label",{for:"name",class:"block text-gray-700 text-xs font-medium mb-1"},"Name",-1)),p(e("input",{type:"text",id:"name","onUpdate:modelValue":s[0]||(s[0]=n=>l(a).name=n),class:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500",required:""},null,512),[[b,l(a).name]])]),e("div",Ne,[s[17]||(s[17]=e("label",{for:"type",class:"block text-gray-700 text-xs font-medium mb-1"},"Type",-1)),p(e("select",{id:"type","onUpdate:modelValue":s[1]||(s[1]=n=>l(a).type=n),class:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500",required:""},[s[16]||(s[16]=e("option",{value:"",disabled:""},"Select type",-1)),(u(!0),m(S,null,A(l(X),n=>(u(),m("option",{key:n.value,value:n.value},c(n.label),9,Te))),128))],512),[[H,l(a).type]])]),e("div",Pe,[s[19]||(s[19]=e("label",{for:"initial_amount",class:"block text-gray-700 text-xs font-medium mb-1"},"Loan Amount",-1)),e("div",Ie,[s[18]||(s[18]=e("div",{class:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-xs"},"KES")],-1)),p(e("input",{type:"number",id:"initial_amount","onUpdate:modelValue":s[2]||(s[2]=n=>l(a).initial_amount=n),class:"w-full pl-8 pr-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500",step:"0.01",min:"0",required:""},null,512),[[b,l(a).initial_amount]])])]),e("div",Re,[s[21]||(s[21]=e("label",{for:"interest_rate",class:"block text-gray-700 text-xs font-medium mb-1"},"Interest Rate",-1)),e("div",Ye,[p(e("input",{type:"number",id:"interest_rate","onUpdate:modelValue":s[3]||(s[3]=n=>l(a).interest_rate=n),class:"w-full pr-6 pl-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500",step:"0.01",min:"0",required:""},null,512),[[b,l(a).interest_rate]]),s[20]||(s[20]=e("div",{class:"absolute inset-y-0 right-0 pr-2 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-xs"},"%")],-1))])]),e("div",He,[s[22]||(s[22]=e("label",{for:"start_date",class:"block text-gray-700 text-xs font-medium mb-1"},"Start Date",-1)),p(e("input",{type:"date",id:"start_date","onUpdate:modelValue":s[4]||(s[4]=n=>l(a).start_date=n),class:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500",required:""},null,512),[[b,l(a).start_date]])]),e("div",Ke,[s[23]||(s[23]=e("label",{class:"block text-gray-700 text-xs font-medium mb-1"},"Duration",-1)),e("div",Ge,[e("div",Xe,[p(e("input",{type:"number",min:"0","onUpdate:modelValue":s[5]||(s[5]=n=>l(a).duration_years=n),placeholder:"Years",class:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500",required:""},null,512),[[b,l(a).duration_years]])]),e("div",Je,[p(e("input",{type:"number",min:"0",max:"11","onUpdate:modelValue":s[6]||(s[6]=n=>l(a).duration_months=n),placeholder:"Months",class:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500",required:""},null,512),[[b,l(a).duration_months]])])])])]),e("div",Qe,[s[24]||(s[24]=e("label",{for:"description",class:"block text-gray-700 text-xs font-medium mb-1"}," Description ",-1)),p(e("textarea",{id:"description","onUpdate:modelValue":s[7]||(s[7]=n=>l(a).description=n),class:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500",rows:"2"},null,512),[[b,l(a).description]])]),e("div",We,[e("button",{type:"button",onClick:D,class:"px-2 py-1 text-xs border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-1 focus:ring-purple-500"}," Cancel "),e("button",{type:"submit",class:"px-2 py-1 text-xs bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-1 focus:ring-purple-500",disabled:l(a).processing},c(l(a).processing?"Saving...":"Add Debt"),9,Ze)])],32)])])):L("",!0)]),_:1})],64))}};export{xt as default};
