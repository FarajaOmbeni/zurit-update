import{r as f,C as b,b as v,o as c,d as n,u as t,m as j,w as r,a as s,c as I,f as h,g as y,h as V,t as S,F as H}from"./app-D5cbL6S9.js";import{A as M}from"./AuthenticatedLayout-Dl3nBWlP.js";import{_ as O}from"./AdminSidebar-C48vlNvK.js";import{E as T}from"./Editor-fLW9Dwnf.js";import{_ as L}from"./AdminTable-5at_q06T.js";import{_,B as x}from"./Button-DtB4D2mS.js";import{_ as E}from"./FileInput-trhdfug3.js";import{u as q,_ as z}from"./useAlert-BXIBTj5d.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"w-full text-gray-900"},J={key:1,class:"mb-12 px-4"},K={key:2,class:"mb-12 px-4"},P={class:"flex gap-4"},oe={__name:"Testimonials",props:{testimonials:Array},emits:["edit","delete"],setup(C,{emit:Q}){const{alertState:u,openAlert:m,clearAlert:k}=q(),p=f(!1),g=f(null),a=b({name:"",image:"",content:""});function A(l){p.value=!0,g.value=l.id,a.name=l.name,a.content=l.content,a.image=null}function N(){a.post(route("testimonials.update",g.value),{onSuccess:()=>{const l=d.value.findIndex(e=>e.id===g.value);l>-1&&(d.value[l]={...a}),p.value=!1,a.reset(),m("success","Testimonial updated successfully!",5e3)},onError:l=>{m("danger",Object.values(l).flat().join(" "),5e3)}})}function w(){p.value=!1,a.reset()}function B(l){confirm(`Delete "${l.name}'s" testimony? This can't be undone.`)&&b({}).delete(route("testimonials.destroy",l.id),{onSuccess:()=>{d.value=d.value.filter(e=>e.id!==l.id),m("success","testimonial deleted.",4e3)},onError:()=>m("danger","Could not delete the testimonial.",4e3)})}const d=f([]),F=f([{key:"name",label:"Name"},{key:"content",label:"Content"}]),U=C;d.value=U.testimonials;const i=b({name:"",image:"",content:""}),$=l=>{i.image=l},D=()=>{i.post(route("testimonials.store"),{onSuccess:()=>{window.location.reload(),m("success","Testimonial added succesfully!",5e3)},onError:l=>{const e=Object.values(l).flat().join(" ");m("danger",e,5e3)}})};return(l,e)=>(c(),v(H,null,[n(t(j),{title:"Dashboard"}),n(M,null,{default:r(()=>[s("div",G,[n(O,null,{default:r(()=>[t(u)?(c(),I(z,{key:0,type:t(u).type,message:t(u).message,duration:t(u).duration,"auto-close":t(u).autoClose,onClose:t(k)},null,8,["type","message","duration","auto-close","onClose"])):h("",!0),p.value?(c(),v("div",K,[e[9]||(e[9]=s("h1",{class:"text-2xl font-bold text-purple-900"},"Edit Testimonials",-1)),s("form",{onSubmit:y(N,["prevent"])},[s("div",null,[n(_,{modelValue:t(a).name,"onUpdate:modelValue":e[3]||(e[3]=o=>t(a).name=o),label:"Name",placeholder:"Enter the testifier name",id:"name"},null,8,["modelValue"]),n(E,{label:"Testifier Image",modelValue:t(a).image,"onUpdate:modelValue":e[4]||(e[4]=o=>t(a).image=o),accept:"image/*",onFileSelected:e[5]||(e[5]=o=>t(a).image=o)},null,8,["modelValue"]),n(T,{label:"Testimonial",modelValue:t(a).content,"onUpdate:modelValue":e[6]||(e[6]=o=>t(a).content=o)},null,8,["modelValue"]),s("div",P,[n(x,{type:"submit"},{default:r(()=>[V(S(t(a).processing?"Saving...":"Save"),1)]),_:1}),n(x,{type:"button",onClick:w},{default:r(()=>e[8]||(e[8]=[V("Cancel")])),_:1})])])],32)])):(c(),v("div",J,[e[7]||(e[7]=s("h1",{class:"text-2xl font-bold text-purple-900"},"Add Testimonials to Homepage",-1)),s("form",{onSubmit:y(D,["prevent"])},[s("div",null,[n(_,{modelValue:t(i).name,"onUpdate:modelValue":e[0]||(e[0]=o=>t(i).name=o),label:"Name",placeholder:"Enter the testifier name",id:"name"},null,8,["modelValue"]),n(E,{label:"Testifier Image",modelValue:t(i).image,"onUpdate:modelValue":e[1]||(e[1]=o=>t(i).image=o),accept:"image/*",onFileSelected:$},null,8,["modelValue"]),n(T,{label:"Testimonial",modelValue:t(i).content,"onUpdate:modelValue":e[2]||(e[2]=o=>t(i).content=o)},null,8,["modelValue"]),n(x,{type:"submit"},{default:r(()=>[V(S(t(i).processing?"Saving...":"Submit"),1)]),_:1})])],32)])),s("div",null,[e[10]||(e[10]=s("h1",{class:"text-2xl font-bold text-purple-900 pl-4 mb-4"},"All Testimonials",-1)),n(L,{data:d.value,headers:F.value,editable:!0,onEdit:A,onDelete:B},null,8,["data","headers"])])]),_:1})])]),_:1})],64))}};export{oe as default};
