import{r as b,C as f,b as _,o as p,d as n,u as l,m as M,w as r,a as i,c as O,f as H,g as x,h as v,t as B,F as L}from"./app-VkLrrOBV.js";import{A as P}from"./AuthenticatedLayout-Bb0fJIL_.js";import{_ as W}from"./AdminSidebar-jFng2ehx.js";import{_ as q}from"./AdminTable-KBQaOgJz.js";import{_ as C,B as V}from"./Button-DvnFj-PO.js";import{_ as S}from"./Select-GUg3WiKt.js";import{_ as E}from"./FileInput-DIVXhsWT.js";import{E as k}from"./Editor-CkUexcOE.js";import{u as z,_ as G}from"./useAlert-C6MLPSdW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"w-full text-gray-900"},K={key:1,class:"mb-8"},Q={key:2,class:"mb-8"},R={class:"flex gap-4"},ie={__name:"Blogs",props:{blogs:Array},emits:["edit","delete"],setup(U,{emit:X}){const{openAlert:d,clearAlert:A,alertState:u}=z(),g=b(!1),c=b(null),t=f({blog_title:"",blog_image:"",blog_tag:"",content:""});function D(o){g.value=!0,c.value=o.id,t.blog_title=o.blog_title,t.blog_tag=o.blog_tag,t.content=o.blog_message,t.blog_image=null}function F(){t.post(route("blogs.update",c.value),{onSuccess:()=>{const o=m.value.findIndex(e=>e.id===c.value);o>-1&&(m.value[o]={...t}),g.value=!1,t.reset(),d("success","Blog updated successfully!",5e3)},onError:o=>{d("danger",Object.values(o).flat().join(" "),5e3)}})}function T(){g.value=!1,t.reset()}function $(o){confirm(`Delete "${o.blog_title}"? This can't be undone.`)&&f({}).delete(route("blogs.destroy",o.id),{onSuccess:()=>{blogsData.value=blogsData.value.filter(e=>e.id!==o.id),d("success","Blog deleted.",4e3)},onError:()=>d("danger","Could not delete the blog.",4e3)})}const m=b([]),I=b([{key:"blog_title",label:"Name"},{key:"blog_image",label:"Image"},{key:"blog_message",label:"Content"}]),y=["Personal Finance & Budgeting","Investing & Wealth Management","Business & Entrepreneurship","Tax & Compliance","Financial Technology & Trends"],N=U,s=f({blog_title:"",blog_image:"",blog_tag:"",content:""}),w=o=>{s.blog_image=o};m.value=N.blogs;const j=()=>{s.post(route("blogs.store"),{onSuccess:()=>{s.reset(),d("success","Blog added succesfully!",5e3)},onError:o=>{const e=Object.values(o).flat().join(" ");d("danger",e,5e3)}})};return(o,e)=>(p(),_(L,null,[n(l(M),{title:"Dashboard"}),n(P,null,{default:r(()=>[i("div",J,[n(W,null,{default:r(()=>[l(u)?(p(),O(G,{key:0,type:l(u).type,message:l(u).message,duration:l(u).duration,"auto-close":l(u).autoClose,onClose:l(A)},null,8,["type","message","duration","auto-close","onClose"])):H("",!0),e[13]||(e[13]=i("h1",{class:"text-2xl font-bold text-purple-900 mb-8"},"Blogs Management",-1)),g.value?(p(),_("div",Q,[e[11]||(e[11]=i("h1",{class:"text-xl font-bold text-purple-900"},"Edit Blog",-1)),i("form",{onSubmit:x(F,["prevent"])},[i("div",null,[n(C,{modelValue:l(t).blog_title,"onUpdate:modelValue":e[4]||(e[4]=a=>l(t).blog_title=a),label:"Title",placeholder:"Enter blog title",id:"title"},null,8,["modelValue"]),n(S,{modelValue:l(t).blog_tag,"onUpdate:modelValue":e[5]||(e[5]=a=>l(t).blog_tag=a),id:"category",options:y,select_title:"Select category",label:"Category"},null,8,["modelValue"]),n(E,{label:"Blog Image",modelValue:l(t).blog_image,"onUpdate:modelValue":e[6]||(e[6]=a=>l(t).blog_image=a),accept:"image/*",onFileSelected:e[7]||(e[7]=a=>l(t).blog_image=a)},null,8,["modelValue"]),n(k,{label:"Content",modelValue:l(t).content,"onUpdate:modelValue":e[8]||(e[8]=a=>l(t).content=a)},null,8,["modelValue"]),i("div",R,[n(V,{type:"submit"},{default:r(()=>[v(B(l(t).processing?"Updating...":"Save"),1)]),_:1}),n(V,{type:"button",onClick:T},{default:r(()=>e[10]||(e[10]=[v("Cancel")])),_:1})])])],32)])):(p(),_("div",K,[e[9]||(e[9]=i("h1",{class:"text-xl font-bold text-purple-900"},"Add New Blog",-1)),i("form",{onSubmit:x(j,["prevent"])},[i("div",null,[n(C,{modelValue:l(s).blog_title,"onUpdate:modelValue":e[0]||(e[0]=a=>l(s).blog_title=a),label:"Title",placeholder:"Enter blog title",id:"title"},null,8,["modelValue"]),n(S,{modelValue:l(s).blog_tag,"onUpdate:modelValue":e[1]||(e[1]=a=>l(s).blog_tag=a),id:"category",options:y,select_title:"Select category",label:"Category"},null,8,["modelValue"]),n(E,{label:"Blog Image",modelValue:l(s).blog_image,"onUpdate:modelValue":e[2]||(e[2]=a=>l(s).blog_image=a),accept:"image/*",onFileSelected:w},null,8,["modelValue"]),n(k,{label:"Content",modelValue:l(s).content,"onUpdate:modelValue":e[3]||(e[3]=a=>l(s).content=a)},null,8,["modelValue"]),n(V,{type:"submit"},{default:r(()=>[v(B(l(s).processing?"Saving...":"Submit"),1)]),_:1})])],32)])),i("div",null,[e[12]||(e[12]=i("h1",{class:"text-xl font-bold text-purple-900"},"All Blogs",-1)),n(q,{data:m.value,headers:I.value,editable:!0,onEdit:D,onDelete:$},null,8,["data","headers"])])]),_:1})])]),_:1})],64))}};export{ie as default};
