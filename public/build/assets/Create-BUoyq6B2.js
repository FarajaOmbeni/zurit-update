import{C as w,c as k,o as l,w as C,a as t,g as M,j as m,b as n,f as u,u as o,F as f,i as b,t as p,k as S,v as c,h as g}from"./app-CywZ9ssT.js";import{_ as D}from"./AdminSidebar-C8tmbOmF.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./EllipsisHorizontalIcon-DjkmQOM3.js";import"./ChartBarIcon-DlZNGXxL.js";import"./UserIcon-DWrKhu5s.js";import"./CalendarIcon-D0hL4oi-.js";import"./CalendarDaysIcon-CMaQq8f3.js";import"./DocumentTextIcon-Cq7V844h.js";import"./UsersIcon-CD0mmdEt.js";const F={class:"max-w-3xl mx-auto py-10 sm:px-6 lg:px-8"},V={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},A={class:"p-6 bg-white border-b border-gray-200"},B={class:"mb-6"},q=["value"],U={key:0,class:"mt-2 text-sm text-red-600"},P={class:"mb-6"},T={key:0,class:"mt-2 text-sm text-red-600"},j={class:"mb-6"},z={key:0,class:"mt-2 text-sm text-red-600"},N={class:"mb-6"},E={class:"mb-4"},H=["for"],I=["onUpdate:modelValue","id"],L={class:"mb-2"},O=["for"],R=["onChange","id"],G=["onClick"],J={class:"flex items-center justify-end pt-6 border-t border-gray-200"},K=["disabled"],Q={key:0},W={key:1},X={__name:"Create",props:{mainCourses:{type:Array,default:()=>[]}},setup(x){const s=w({title:"",description:"",parent_id:"",materials:[{title:"",file:null}]}),y=()=>{s.materials.push({title:"",file:null})},h=i=>{s.materials.splice(i,1)},v=(i,e)=>{const r=i.target.files[0];r&&r.type==="application/pdf"?s.materials[e].file=r:(alert("Please upload a valid PDF file."),i.target.value="")},_=()=>{const i=new FormData;i.append("title",s.title),i.append("description",s.description),i.append("parent_id",s.parent_id),s.materials.forEach((e,r)=>{i.append(`materials[${r}][title]`,e.title),e.file&&i.append(`materials[${r}][file]`,e.file)}),s.post(route("admin.courses.store"),{data:i,forceFormData:!0,onSuccess:()=>{s.reset()}})};return(i,e)=>(l(),k(D,{title:"Add Sub-Course"},{default:C(()=>[t("div",F,[t("div",V,[t("div",A,[e[13]||(e[13]=t("h2",{class:"text-lg font-medium text-gray-900 mb-6"},"Add Sub-Course",-1)),t("form",{onSubmit:M(_,["prevent"])},[t("div",B,[e[5]||(e[5]=t("label",{for:"parent_id",class:"block text-sm font-medium text-gray-700"},"Select Main Course *",-1)),m(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>o(s).parent_id=r),id:"parent_id",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm",required:""},[e[4]||(e[4]=t("option",{value:""},"Choose a main course",-1)),(l(!0),n(f,null,b(x.mainCourses,r=>(l(),n("option",{key:r.id,value:r.id},p(r.title),9,q))),128))],512),[[S,o(s).parent_id]]),e[6]||(e[6]=t("p",{class:"mt-1 text-xs text-gray-500"}," Select the main course to which you want to add this sub-course. ",-1)),o(s).errors.parent_id?(l(),n("p",U,p(o(s).errors.parent_id),1)):u("",!0)]),t("div",P,[e[7]||(e[7]=t("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Sub-Course Title",-1)),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>o(s).title=r),type:"text",id:"title",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm",required:""},null,512),[[c,o(s).title]]),o(s).errors.title?(l(),n("p",T,p(o(s).errors.title),1)):u("",!0)]),t("div",j,[e[8]||(e[8]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),m(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=r=>o(s).description=r),id:"description",rows:"4",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm",required:""},null,512),[[c,o(s).description]]),o(s).errors.description?(l(),n("p",z,p(o(s).errors.description),1)):u("",!0)]),t("div",N,[e[11]||(e[11]=t("h3",{class:"text-md font-medium text-gray-700 mb-4"},"Study Materials",-1)),(l(!0),n(f,null,b(o(s).materials,(r,a)=>(l(),n("div",{key:a,class:"material-item mb-4 p-4 border rounded-lg"},[t("div",E,[t("label",{for:`material-title-${a}`,class:"block text-sm font-medium text-gray-700 mb-1"},"Document Title",8,H),m(t("input",{"onUpdate:modelValue":d=>r.title=d,type:"text",id:`material-title-${a}`,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm",required:""},null,8,I),[[c,r.title]])]),t("div",L,[t("label",{for:`material-file-${a}`,class:"block text-sm font-medium text-gray-700 mb-1"},"PDF File",8,O),t("input",{type:"file",onChange:d=>v(d,a),id:`material-file-${a}`,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100",accept:".pdf",required:""},null,40,R),e[9]||(e[9]=t("p",{class:"mt-1 text-xs text-gray-500"},"Maximum file size: 10MB. Only PDF files are accepted.",-1))]),o(s).materials.length>1?(l(),n("button",{key:0,type:"button",onClick:d=>h(a),class:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Remove Material ",8,G)):u("",!0)]))),128)),t("button",{type:"button",onClick:y,class:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-purple-700 bg-purple-100 hover:bg-purple-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500"},e[10]||(e[10]=[t("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),g(" Add Another Material ")]))]),t("div",J,[t("button",{type:"button",onClick:e[3]||(e[3]=r=>i.$inertia.visit(i.route("admin.courses.index"))),class:"mr-4 inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500"}," Cancel "),t("button",{type:"submit",class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",disabled:o(s).processing},[o(s).processing?(l(),n("span",Q,e[12]||(e[12]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),g(" Saving... ")]))):(l(),n("span",W,"Add Sub-Course"))],8,K)])],32)])])])]),_:1}))}},ae=$(X,[["__scopeId","data-v-65e0a9a9"]]);export{ae as default};
