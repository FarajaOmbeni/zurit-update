import{r as _,k as O,C as L,c,o as d,b as r,f as m,u as a,m as ve,w as M,a as e,e as fe,t as i,h as x,g as ge,F as C,i as E,P as be,n as ye}from"./app-fxmBWGe2.js";import{A as xe}from"./AuthenticatedLayout-DOkoUVhZ.js";import{_ as _e}from"./Sidebar-BUBqlyoD.js";import{_ as he}from"./DashboardBackButton-B2XvTayK.js";import{_ as we,r as R,a as Y,b as q}from"./LegacyProgress-Ctlc6toE.js";import{_ as V}from"./Input-S8MYbjlh.js";import{_ as z}from"./Select-yJdsWE-W.js";import{_ as Ae}from"./Alert-ofgZYSJG.js";import{u as ke}from"./useAlert-DUqil9dq.js";import{r as P}from"./BuildingOfficeIcon-dyNkjaag.js";import{r as N}from"./BanknotesIcon-CxgmaemQ.js";import{r as K}from"./CalendarIcon-DLgEqIuS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                */import"./EllipsisHorizontalIcon-CelZeobO.js";import"./AcademicCapIcon-BL3fO8no.js";import"./CalculatorIcon-BGkQPWED.js";import"./UserIcon-DZYDXlfP.js";import"./ChartBarIcon-oOgODwEd.js";import"./HomeIcon-J53tI-Ff.js";const Ce={class:"w-full text-gray-900"},Ve={class:"max-w-6xl mx-auto p-6"},$e={class:"flex justify-between items-center mb-8"},je={class:"text-right"},Se={class:"text-2xl font-bold text-green-600"},Fe={class:"text-sm text-gray-500 mt-1"},De={key:0},Ee={class:"mb-6"},Te={key:1,class:"bg-white rounded-lg shadow-sm border p-6 mb-8"},Me={class:"text-lg font-semibold text-gray-900 mb-4"},qe={class:"grid md:grid-cols-2 gap-4"},Ne={class:"grid md:grid-cols-2 gap-4"},Ue={class:"flex space-x-4"},Be=["disabled"],Ie={key:2,class:"space-y-4 mb-8"},Oe={class:"grid gap-4"},Le={class:"flex items-start justify-between"},Re={class:"flex-1"},Ye={class:"flex items-center space-x-3 mb-2"},ze={class:"text-lg font-semibold text-gray-900"},Pe={class:"text-sm text-gray-500"},Ke={key:0,class:"text-gray-600 mb-3"},He={class:"flex items-center space-x-6 text-sm text-gray-500"},Je={class:"flex items-center space-x-1"},Ge={class:"flex items-center space-x-1"},Qe={class:"mt-4"},We={class:"flex items-center justify-between mb-2"},Xe={class:"text-sm text-gray-600"},Ze=["onClick"],et={key:0,class:"space-y-1"},tt={class:"text-gray-700"},st={class:"text-gray-900 font-medium"},lt={class:"text-xs text-gray-500 mt-1"},at={class:"flex items-center space-x-2 ml-4"},ot=["onClick"],nt=["onClick"],it={key:3,class:"space-y-4 mb-8"},rt={class:"grid gap-4"},dt={class:"flex items-start justify-between"},ct={class:"flex-1"},ut={class:"flex items-center space-x-3 mb-2"},mt={class:"text-lg font-semibold text-gray-900"},pt={class:"text-sm text-gray-500"},vt={key:0,class:"text-gray-600 mb-3"},ft={class:"flex items-center space-x-6 text-sm text-gray-500"},gt={class:"flex items-center space-x-1"},bt={class:"flex items-center space-x-1"},yt={key:0,class:"flex items-center space-x-1"},xt={class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded"},_t={class:"mt-3 text-xs text-gray-500 space-y-1"},ht={key:0},wt={class:"flex items-center space-x-2 ml-4"},At={disabled:"",class:"p-2 text-gray-300 cursor-not-allowed rounded-lg transition-colors duration-200",title:"Investment management not available in legacy planning"},kt={disabled:"",class:"p-2 text-gray-300 cursor-not-allowed rounded-lg transition-colors duration-200",title:"Investment management not available in legacy planning"},Ct={key:4,class:"text-center py-12"},Vt={key:5,class:"flex justify-end pt-8 border-t"},$t={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},jt={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},St={class:"p-6"},Ft={class:"flex items-center mb-4"},Dt={class:"flex-shrink-0"},Et={class:"mb-6"},Tt={class:"text-gray-600"},Mt={class:"flex space-x-4"},qt=["disabled"],Nt={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ut={class:"bg-white rounded-lg shadow-xl max-w-xl w-full mx-4"},Bt={class:"p-6"},It={class:"mb-4"},Ot={class:"text-gray-600 text-sm"},Lt={class:"flex items-center justify-between mb-3"},Rt={class:"text-sm text-gray-600"},Yt={key:0,class:"text-gray-600 text-sm mb-4"},zt={class:"space-y-3 max-h-80 overflow-y-auto mb-4"},Pt={class:"md:col-span-4"},Kt={class:"md:col-span-2"},Ht={class:"md:col-span-6 flex justify-end"},Jt=["onClick"],Gt={class:"flex space-x-4"},Qt=["disabled"],bs={__name:"Assets",props:{assets:{type:Array,default:()=>[]},investments:{type:Array,default:()=>[]},beneficiaries:{type:Array,default:()=>[]}},setup(v){const A=v,{openAlert:b,clearAlert:H,alertState:k}=ke(),f=_(!1),$=_(!1),g=_(null),h=_(null),j=_(!1),S=_(!1),F=_(null),y=_([]),J=O(()=>A.beneficiaries.map(s=>({value:s.id,label:s.full_name}))),D=O(()=>y.value.reduce((s,t)=>s+(parseFloat(t.percentage)||0),0)),n=L({name:"",type:"",description:"",value:"",acquisition_date:""}),U=[{value:"real_estate",label:"Real Estate"},{value:"vehicle",label:"Vehicle"},{value:"bank_account",label:"Bank Account"},{value:"investment",label:"Investment"},{value:"business",label:"Business"},{value:"jewelry",label:"Jewelry"},{value:"artwork",label:"Artwork"},{value:"electronics",label:"Electronics"},{value:"furniture",label:"Furniture"},{value:"other",label:"Other"}],G=[{value:"stocks",label:"Stocks"},{value:"bonds",label:"Bonds"},{value:"mmf",label:"Money Market Fund"},{value:"bills",label:"Treasury Bills"},{value:"real_estate",label:"Real Estate Investment"},{value:"mutual_funds",label:"Mutual Funds"},{value:"etf",label:"Exchange Traded Fund"},{value:"retirement",label:"Retirement Fund"},{value:"crypto",label:"Cryptocurrency"},{value:"other",label:"Other"}];function Q(){g.value?n.put(route("legacy.assets.update",g.value.id),{onSuccess:()=>{n.reset(),f.value=!1,g.value=null,b("success","Asset updated successfully!",5e3)},onError:s=>{const t=Object.values(s).flat().join(" ");b("danger",t,1e4)}}):n.post(route("legacy.assets.store"),{onSuccess:()=>{n.reset(),f.value=!1,b("success","Asset added successfully!",5e3)},onError:s=>{const t=Object.values(s).flat().join(" ");b("danger",t,1e4)}})}function T(s){return new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(s)}function B(s){return s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not specified"}function W(s){if(!s)return"";const t=new Date(s),o=t.getFullYear(),u=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return`${o}-${u}-${l}`}function X(s){const t=U.find(o=>o.value===s);return t?t.label:s}function Z(s){const t=G.find(o=>o.value===s);return t?t.label:s}function ee(){const s=A.assets.reduce((o,u)=>o+parseFloat(u.value||0),0),t=A.investments.reduce((o,u)=>o+parseFloat(u.value||0),0);return s+t}function w(s){return(s.beneficiary_allocations||s.beneficiaryAllocations||[]).map(o=>{var u,l;return{id:o.id,beneficiary_id:o.beneficiary_id||((u=o.beneficiary)==null?void 0:u.id),beneficiary_name:(l=o.beneficiary)==null?void 0:l.full_name,percentage:o.percentage}}).filter(o=>o.beneficiary_id)}function te(){return A.assets.filter(s=>w(s).length>0).length}function se(s){return[]}function le(){return A.investments.filter(s=>se().length>0).length}function ae(s){g.value=s,n.name=s.name,n.type=s.type,n.description=s.description||"",n.value=s.value,n.acquisition_date=s.acquisition_date?W(s.acquisition_date):"",f.value=!0}function I(){g.value=null,n.reset(),f.value=!1}function oe(s){h.value=s,$.value=!0}function ne(){h.value&&n.delete(route("legacy.assets.destroy",h.value.id),{onSuccess:()=>{$.value=!1,h.value=null,b("success","Asset deleted successfully!",5e3)},onError:s=>{const t=Object.values(s).flat().join(" ");b("danger",t,1e4)}})}function ie(){$.value=!1,h.value=null}async function re(s){F.value=s,y.value=w(s).map(t=>({beneficiary_id:t.beneficiary_id,percentage:t.percentage})),j.value=!0,S.value=!0;try{const t=route("legacy.asset-allocation.status")+`?asset_id=${s.id}`,o=await fetch(t,{headers:{Accept:"application/json"}});if(o.ok){const u=await o.json();y.value=(u.allocations||[]).map(l=>({beneficiary_id:l.beneficiary_id,percentage:l.percentage}))}}catch{}finally{S.value=!1}}function de(){y.value.push({beneficiary_id:null,percentage:0})}function ce(s){y.value.splice(s,1)}function ue(){const s=y.value.map(o=>o.beneficiary_id).filter(Boolean),t=new Set(s);return s.length!==t.size?(b("danger","Each beneficiary can only be allocated once per asset.",8e3),!1):D.value>100.01?(b("danger",`Total allocation cannot exceed 100%. Current: ${D.value}%`,8e3),!1):(y.value=y.value.filter(o=>o.beneficiary_id!=null),!0)}function me(){if(!F.value||!ue())return;const s={asset_id:F.value.id,beneficiary_allocations:y.value.map(o=>({beneficiary_id:o.beneficiary_id,percentage:Number(o.percentage)||0}))};L(s).post(route("legacy.asset-allocation.store"),{preserveScroll:!0,onSuccess:()=>{j.value=!1,b("success","Allocations saved successfully!",5e3)},onError:o=>{const u=Object.values(o).flat().join(" ");b("danger",u||"Could not save allocations.",1e4)}})}return(s,t)=>{var o;return d(),c(C,null,[r(a(ve),{title:"Assets - Legacy & Estate Planning"}),r(xe,null,{default:M(()=>{var u;return[e("div",Ce,[r(_e,null,{default:M(()=>[r(he),e("div",Ve,[a(k)?(d(),fe(Ae,{key:0,type:a(k).type,message:a(k).message,duration:a(k).duration,"auto-close":a(k).autoClose,onClose:a(H)},null,8,["type","message","duration","auto-close","onClose"])):m("",!0),e("div",$e,[t[10]||(t[10]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"}," Step 1: Your Assets "),e("p",{class:"text-gray-600"}," Document all your assets that will be part of your estate plan. ")],-1)),e("div",je,[t[9]||(t[9]=e("div",{class:"text-sm text-gray-500 mb-1"},"Total Value",-1)),e("div",Se,i(T(ee())),1),e("div",Fe,[x(i(te())+"/"+i(v.assets.length)+" assets allocated ",1),v.investments.length>0?(d(),c("span",De," • "+i(le())+"/"+i(v.investments.length)+" investments allocated",1)):m("",!0)])])]),r(we,{current:1}),e("div",Ee,[e("button",{onClick:t[0]||(t[0]=l=>f.value?g.value?I():f.value=!1:f.value=!0),class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center transition-colors duration-200"},[r(a(R),{class:"w-5 h-5 mr-2"}),x(" "+i(f.value?"Cancel":"Add Asset"),1)])]),f.value?(d(),c("div",Te,[e("h3",Me,i(g.value?"Edit Asset":"Add New Asset"),1),e("form",{onSubmit:ge(Q,["prevent"]),class:"space-y-4"},[e("div",qe,[r(V,{modelValue:a(n).name,"onUpdate:modelValue":t[1]||(t[1]=l=>a(n).name=l),label:"Asset Name",placeholder:"e.g., Family Home, Toyota Camry",error:a(n).errors.name,required:""},null,8,["modelValue","error"]),r(z,{modelValue:a(n).type,"onUpdate:modelValue":t[2]||(t[2]=l=>a(n).type=l),label:"Asset Type",options:U,error:a(n).errors.type,required:""},null,8,["modelValue","error"])]),e("div",Ne,[r(V,{modelValue:a(n).value,"onUpdate:modelValue":t[3]||(t[3]=l=>a(n).value=l),type:"number",step:"0.01",min:"0",label:"Estimated Value (KES)",placeholder:"0.00",error:a(n).errors.value,required:""},null,8,["modelValue","error"]),r(V,{modelValue:a(n).acquisition_date,"onUpdate:modelValue":t[4]||(t[4]=l=>a(n).acquisition_date=l),type:"date",label:"Acquisition Date (Optional)",error:a(n).errors.acquisition_date},null,8,["modelValue","error"])]),r(V,{modelValue:a(n).description,"onUpdate:modelValue":t[5]||(t[5]=l=>a(n).description=l),label:"Description (Optional)",placeholder:"Additional details about the asset",error:a(n).errors.description},null,8,["modelValue","error"]),e("div",Ue,[e("button",{type:"submit",disabled:a(n).processing,class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center transition-colors duration-200"},i(a(n).processing?g.value?"Updating...":"Adding...":g.value?"Update Asset":"Add Asset"),9,Be),e("button",{type:"button",onClick:t[6]||(t[6]=l=>g.value?I():f.value=!1),class:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg flex items-center transition-colors duration-200"}," Cancel ")])],32)])):m("",!0),v.assets.length>0?(d(),c("div",Ie,[t[12]||(t[12]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Your Assets",-1)),e("div",Oe,[(d(!0),c(C,null,E(v.assets,l=>(d(),c("div",{key:l.id,class:"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow"},[e("div",Le,[e("div",Re,[e("div",Ye,[r(a(P),{class:"w-6 h-6 text-blue-600 flex-shrink-0"}),e("div",null,[e("h4",ze,i(l.name),1),e("p",Pe,i(X(l.type)),1)])]),l.description?(d(),c("div",Ke,i(l.description),1)):m("",!0),e("div",He,[e("div",Je,[r(a(N),{class:"w-4 h-4"}),e("span",null,i(T(l.value)),1)]),e("div",Ge,[r(a(K),{class:"w-4 h-4"}),e("span",null,i(B(l.acquisition_date)),1)])]),e("div",Qe,[e("div",We,[e("div",Xe,[t[11]||(t[11]=e("span",{class:"font-medium"},"Allocations:",-1)),e("span",null,i(w(l).length>0?"":"None yet"),1)]),e("button",{onClick:p=>re(l),type:"button",class:"text-purple-700 hover:text-purple-800 text-sm font-medium"}," Manage Allocations ",8,Ze)]),w(l).length>0?(d(),c("div",et,[(d(!0),c(C,null,E(w(l),p=>(d(),c("div",{key:p.beneficiary_id,class:"flex items-center justify-between text-sm"},[e("span",tt,i(p.beneficiary_name),1),e("span",st,i(p.percentage)+"%",1)]))),128)),e("div",lt," Total: "+i(w(l).reduce((p,pe)=>p+(parseFloat(pe.percentage)||0),0))+"% ",1)])):m("",!0)])]),e("div",at,[e("button",{onClick:p=>ae(l),class:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors duration-200",title:"Edit Asset"},[r(a(Y),{class:"w-5 h-5"})],8,ot),e("button",{onClick:p=>oe(l),class:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",title:"Delete Asset"},[r(a(q),{class:"w-5 h-5"})],8,nt)])])]))),128))])])):m("",!0),v.investments.length>0?(d(),c("div",it,[t[15]||(t[15]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Your Investments",-1)),e("div",rt,[(d(!0),c(C,null,E(v.investments,l=>(d(),c("div",{key:l.id,class:"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow"},[e("div",dt,[e("div",ct,[e("div",ut,[r(a(N),{class:"w-6 h-6 text-green-600 flex-shrink-0"}),e("div",null,[e("h4",mt,i(l.name),1),e("p",pt,i(Z(l.type)),1)])]),l.description?(d(),c("div",vt,i(l.description),1)):m("",!0),e("div",ft,[e("div",gt,[r(a(N),{class:"w-4 h-4"}),e("span",null,i(T(l.value)),1)]),e("div",bt,[r(a(K),{class:"w-4 h-4"}),e("span",null,i(B(l.start_date)),1)]),l.expected_return_rate?(d(),c("div",yt,[e("span",xt,i(l.expected_return_rate)+"% expected return ",1)])):m("",!0)]),e("div",_t,[l.status?(d(),c("div",ht,[t[13]||(t[13]=e("span",{class:"font-medium"},"Status:",-1)),x(" "+i(l.status),1)])):m("",!0)]),t[14]||(t[14]=e("div",{class:"mt-4"},[e("div",{class:"flex items-center justify-between mb-2"},[e("div",{class:"text-sm text-gray-600"},[e("span",{class:"font-medium"},"Allocations:"),e("span",null,"Not yet available for investments")])])],-1))]),e("div",wt,[e("button",At,[r(a(Y),{class:"w-5 h-5"})]),e("button",kt,[r(a(q),{class:"w-5 h-5"})])])])]))),128))])])):m("",!0),v.assets.length===0&&v.investments.length===0?(d(),c("div",Ct,[r(a(P),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t[17]||(t[17]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No assets or investments added yet",-1)),t[18]||(t[18]=e("p",{class:"text-gray-600 mb-6"}," Start by adding your first asset to begin your estate plan. Your existing investments will be automatically included. ",-1)),e("button",{onClick:t[7]||(t[7]=l=>{g.value=null,f.value=!0}),class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center transition-colors duration-200"},[r(a(R),{class:"w-5 h-5 mr-2"}),t[16]||(t[16]=x(" Add Your First Asset "))])])):m("",!0),v.assets.length>0||v.investments.length>0?(d(),c("div",Vt,[r(a(be),{href:s.route("legacy.beneficiaries"),class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center transition-colors duration-200"},{default:M(()=>t[19]||(t[19]=[x(" Continue to Beneficiaries → ")])),_:1},8,["href"])])):m("",!0)])]),_:1})]),$.value?(d(),c("div",$t,[e("div",jt,[e("div",St,[e("div",Ft,[e("div",Dt,[r(a(q),{class:"w-6 h-6 text-red-600"})]),t[20]||(t[20]=e("div",{class:"ml-3"},[e("h3",{class:"text-lg font-semibold text-gray-900"}," Delete Asset ")],-1))]),e("div",Et,[e("p",Tt,[t[21]||(t[21]=x(" Are you sure you want to delete ")),e("strong",null,i((u=h.value)==null?void 0:u.name),1),t[22]||(t[22]=x("? This action cannot be undone. "))])]),e("div",Mt,[e("button",{onClick:ne,disabled:a(n).processing,class:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg flex items-center transition-colors duration-200"},i(a(n).processing?"Deleting...":"Delete"),9,qt),e("button",{onClick:ie,class:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg flex items-center transition-colors duration-200"}," Cancel ")])])])])):m("",!0)]}),_:1}),j.value?(d(),c("div",Nt,[e("div",Ut,[e("div",Bt,[e("div",It,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Manage Allocations",-1)),e("p",Ot,[t[23]||(t[23]=x("Asset: ")),e("strong",null,i((o=F.value)==null?void 0:o.name),1)])]),e("div",Lt,[e("div",Rt,[t[25]||(t[25]=x(" Total: ")),e("strong",{class:ye(D.value>100?"text-red-600":"text-gray-900")},i(D.value)+"%",3),t[26]||(t[26]=e("span",{class:"ml-2"},"(Partial allocations allowed. Do not exceed 100%.)",-1))]),e("button",{onClick:de,type:"button",class:"bg-purple-50 hover:bg-purple-100 text-purple-700 font-semibold py-2 px-3 rounded-lg transition-colors duration-200"}," + Add Row ")]),S.value?(d(),c("div",Yt,"Loading current allocations...")):m("",!0),e("div",zt,[(d(!0),c(C,null,E(y.value,(u,l)=>(d(),c("div",{key:l,class:"grid md:grid-cols-6 gap-2 items-end"},[e("div",Pt,[r(z,{modelValue:u.beneficiary_id,"onUpdate:modelValue":p=>u.beneficiary_id=p,label:"Beneficiary",options:J.value,error:""},null,8,["modelValue","onUpdate:modelValue","options"])]),e("div",Kt,[r(V,{modelValue:u.percentage,"onUpdate:modelValue":p=>u.percentage=p,type:"number",step:"0.01",min:"0",max:"100",label:"%"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",Ht,[e("button",{onClick:p=>ce(l),type:"button",class:"text-red-600 hover:text-red-700 text-sm"},"Remove",8,Jt)])]))),128))]),e("div",Gt,[e("button",{onClick:me,disabled:S.value,class:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center transition-colors duration-200"}," Save Allocations ",8,Qt),e("button",{onClick:t[8]||(t[8]=u=>j.value=!1),class:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg flex items-center transition-colors duration-200"}," Cancel ")])])])])):m("",!0)],64)}}};export{bs as default};
