import{C as _,c as k,o as l,w as C,a as t,g as M,j as a,b as d,f as u,u as o,F as c,i as b,t as m,k as S,v as f,h as x}from"./app-BDqVZPYM.js";import{_ as D}from"./AdminSidebar-DwckVW_I.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./EllipsisHorizontalIcon-CgiS0WXq.js";import"./UserIcon-DVaAlQ1p.js";import"./CalendarDaysIcon-Da_PwDGb.js";const $={class:"max-w-3xl mx-auto py-10 sm:px-6 lg:px-8"},F={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},q={class:"p-6 bg-white border-b border-gray-200"},A={class:"mb-6"},B=["value"],U={key:0,class:"mt-2 text-sm text-red-600"},P={class:"mb-6"},T={key:0,class:"mt-2 text-sm text-red-600"},j={class:"mb-6"},z={key:0,class:"mt-2 text-sm text-red-600"},E={class:"mb-6"},N={key:0,class:"mt-2 text-sm text-red-600"},H={class:"mb-6"},O={class:"mb-4"},I=["for"],L=["onUpdate:modelValue","id"],R={class:"mb-2"},G=["for"],J=["onChange","id"],K=["onClick"],Q={class:"flex items-center justify-end pt-6 border-t border-gray-200"},W=["disabled"],X={key:0},Y={key:1},Z={__name:"Create",props:{mainCourses:{type:Array,default:()=>[]}},setup(g){const r=_({title:"",description:"",parent_id:"",order:1,materials:[{title:"",file:null}]}),y=()=>{r.materials.push({title:"",file:null})},v=i=>{r.materials.splice(i,1)},h=(i,e)=>{const s=i.target.files[0];s&&s.type==="application/pdf"?r.materials[e].file=s:(alert("Please upload a valid PDF file."),i.target.value="")},w=()=>{const i=new FormData;i.append("title",r.title),i.append("description",r.description),i.append("parent_id",r.parent_id),r.materials.forEach((e,s)=>{i.append(`materials[${s}][title]`,e.title),e.file&&i.append(`materials[${s}][file]`,e.file)}),r.post(route("admin.courses.store"),{data:i,forceFormData:!0,onSuccess:()=>{r.reset()}})};return(i,e)=>(l(),k(D,{title:"Add Sub-Course"},{default:C(()=>[t("div",$,[t("div",F,[t("div",q,[e[16]||(e[16]=t("h2",{class:"text-lg font-medium text-gray-900 mb-6"},"Add Sub-Course",-1)),t("form",{onSubmit:M(w,["prevent"])},[t("div",A,[e[6]||(e[6]=t("label",{for:"parent_id",class:"block text-sm font-medium text-gray-700"},"Select Main Course *",-1)),a(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o(r).parent_id=s),id:"parent_id",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm",required:""},[e[5]||(e[5]=t("option",{value:""},"Choose a main course",-1)),(l(!0),d(c,null,b(g.mainCourses,s=>(l(),d("option",{key:s.id,value:s.id},m(s.title),9,B))),128))],512),[[S,o(r).parent_id]]),e[7]||(e[7]=t("p",{class:"mt-1 text-xs text-gray-500"}," Select the main course to which you want to add this sub-course. ",-1)),o(r).errors.parent_id?(l(),d("p",U,m(o(r).errors.parent_id),1)):u("",!0)]),t("div",P,[e[8]||(e[8]=t("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Sub-Course Title",-1)),a(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o(r).title=s),type:"text",id:"title",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm",required:""},null,512),[[f,o(r).title]]),o(r).errors.title?(l(),d("p",T,m(o(r).errors.title),1)):u("",!0)]),t("div",j,[e[9]||(e[9]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),a(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>o(r).description=s),id:"description",rows:"4",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm",required:""},null,512),[[f,o(r).description]]),o(r).errors.description?(l(),d("p",z,m(o(r).errors.description),1)):u("",!0)]),t("div",E,[e[10]||(e[10]=t("label",{for:"order",class:"block text-sm font-medium text-gray-700"},"Order (Sequence)",-1)),a(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o(r).order=s),type:"number",id:"order",min:"1",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm",required:""},null,512),[[f,o(r).order]]),e[11]||(e[11]=t("p",{class:"mt-1 text-sm text-gray-500"},"Enter the sequence number for this sub-course (1 = first, 2 = second, etc.)",-1)),o(r).errors.order?(l(),d("p",N,m(o(r).errors.order),1)):u("",!0)]),t("div",H,[e[14]||(e[14]=t("h3",{class:"text-md font-medium text-gray-700 mb-4"},"Study Materials",-1)),(l(!0),d(c,null,b(o(r).materials,(s,n)=>(l(),d("div",{key:n,class:"material-item mb-4 p-4 border rounded-lg"},[t("div",O,[t("label",{for:`material-title-${n}`,class:"block text-sm font-medium text-gray-700 mb-1"},"Document Title",8,I),a(t("input",{"onUpdate:modelValue":p=>s.title=p,type:"text",id:`material-title-${n}`,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm",required:""},null,8,L),[[f,s.title]])]),t("div",R,[t("label",{for:`material-file-${n}`,class:"block text-sm font-medium text-gray-700 mb-1"},"PDF File",8,G),t("input",{type:"file",onChange:p=>h(p,n),id:`material-file-${n}`,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100",accept:".pdf",required:""},null,40,J),e[12]||(e[12]=t("p",{class:"mt-1 text-xs text-gray-500"},"Maximum file size: 10MB. Only PDF files are accepted.",-1))]),o(r).materials.length>1?(l(),d("button",{key:0,type:"button",onClick:p=>v(n),class:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Remove Material ",8,K)):u("",!0)]))),128)),t("button",{type:"button",onClick:y,class:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-purple-700 bg-purple-100 hover:bg-purple-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500"},e[13]||(e[13]=[t("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),x(" Add Another Material ")]))]),t("div",Q,[t("button",{type:"button",onClick:e[4]||(e[4]=s=>i.$inertia.visit(i.route("admin.courses.index"))),class:"mr-4 inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500"}," Cancel "),t("button",{type:"submit",class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",disabled:o(r).processing},[o(r).processing?(l(),d("span",X,e[15]||(e[15]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" Saving... ")]))):(l(),d("span",Y,"Add Sub-Course"))],8,W)])],32)])])])]),_:1}))}},le=V(Z,[["__scopeId","data-v-64caf4ed"]]);export{le as default};
